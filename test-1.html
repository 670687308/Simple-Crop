<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试一</title>
    <link rel="stylesheet" href="./dist/template-1.css">
</head>
<body>
    <script src="./index.js"></script>
    <script>
        window.onload = function(){
            var simpleCrop = new SimpleCrop({
                title:'上传图片过大，请裁剪',
                src:'./img/test1.jpg',
                size:{
                    width:2340,
                    height:1080
                },
                cropCallback:function(){
                    this.$resultCanvas.style.marginRight = '10px';
                    document.body.appendChild(this.$resultCanvas);
                },
                borderDraw:function(){
                    this.cropCoverContext.fillStyle = 'rgba(0,0,0,.3)';
                    this.cropCoverContext.fillRect(0,0,this.$cropCover.width,this.$cropCover.height);
                    this.cropCoverContext.fillStyle = '#0BFF00';
                    var width = this.borderWidth*2*this.times+this.size.width;
                    var height = this.borderWidth*2*this.times+this.size.height;
                    this.cropCoverContext.fillRect((this.maskSize.width-width)*1.0/2,(this.maskSize.height-height)*1.0/2,width,height);
                    this.cropCoverContext.clearRect((this.maskSize.width-this.size.width)*1.0/2,(this.maskSize.height-this.size.height)*1.0/2,this.size.width,this.size.height);
                },
                coverDraw:function(){
                    this.cropCoverContext.setLineDash([15, 20]);
                    var maxSize = this.size.width>this.size.height?this.size.width:this.size.height;
                    this.cropCoverContext.lineWidth = maxSize/200;

                    this.cropCoverContext.beginPath();
                    var rect1 = {
                        left:(this.maskSize.width-this.size.width)*1.0/2,
                        top:(this.maskSize.height-this.size.height)*1.0/2+this.size.height*0.125,
                        right:(this.maskSize.width-this.size.width)*1.0/2+this.size.width,
                        bottom:(this.maskSize.height-this.size.height)*1.0/2+this.size.height-this.size.height*0.125
                    }
                    this.cropCoverContext.moveTo(rect1.left,rect1.top);
                    this.cropCoverContext.lineTo(rect1.right,rect1.top);
                    this.cropCoverContext.moveTo(rect1.left,rect1.bottom);
                    this.cropCoverContext.lineTo(rect1.right,rect1.bottom);
                    this.cropCoverContext.strokeStyle = '#ffffff';
                    this.cropCoverContext.stroke();

                    this.cropCoverContext.beginPath();
                    var rect2 = {
                        left:(this.maskSize.width-this.size.width)*1.0/2+this.size.width*0.2,
                        top:(this.maskSize.height-this.size.height)*1.0/2+this.size.height*0.2,
                        right:(this.maskSize.width-this.size.width)*1.0/2+this.size.width-this.size.width*0.2 ,
                        bottom:(this.maskSize.height-this.size.height)*1.0/2+this.size.height-this.size.height*0.2
                    }
                    this.cropCoverContext.moveTo(rect2.left,rect2.top);
                    this.cropCoverContext.lineTo(rect2.right,rect2.top);
                    this.cropCoverContext.lineTo(rect2.right,rect2.bottom);
                    this.cropCoverContext.lineTo(rect2.left,rect2.bottom);
                    this.cropCoverContext.lineTo(rect2.left,rect2.top);
                    this.cropCoverContext.strokeStyle = '#ffeb3b';
                    this.cropCoverContext.stroke();
                }
            });
        }
    </script>
</body>
</html>