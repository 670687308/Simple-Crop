{"version":3,"sources":["webpack://SimpleCrop/webpack/universalModuleDefinition","webpack://SimpleCrop/webpack/bootstrap","webpack://SimpleCrop/./index.js","webpack://SimpleCrop/./node_modules/prefix-umd/index.js","webpack://SimpleCrop/./node_modules/exif-js/exif.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/applyToPoint.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/fromObject.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/fromString.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/identity.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/inverse.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/utils.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/isAffineMatrix.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/translate.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/transform.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/rotate.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/scale.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/shear.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/skew.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/toString.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/smoothMatrix.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/fromTriangles.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/fromDefinition.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/fromTransformAttribute.js","webpack://SimpleCrop/./node_modules/transformation-matrix/src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Prefix","EXIF","TransformationMatrix","transitionEndEvent","el","document","createElement","transitions","undefined","style","whichTransitionEvent","transformProperty","prefix","transitionProperty","SimpleCrop","params","this","id","Date","getTime","visible","title","debug","$container","body","scaleSlider","maxScale","self","passiveSupported","options","addEventListener","err","isSupportTouch","_multiPoint","_rotateScale","_baseMoveX","_curMoveX","_changedX","_downPoints","_isControl","_scaleMoveX","_baseAngle","scaleTimes","rotateAngle","construct","initFuncBtns","initRotateSlider","initChilds","initBoxBorder","updateBox","bindEvent","Array","includes","valueToFind","fromIndex","len","length","x","y","k","Math","max","abs","isNaN","initTitle","$title","querySelector","innerText","visibility","onlyInit","borderWidth","borderColor","boldCornerLen","coverColor","coverDraw","borderDraw","defaultBorderDraw","$cropCover","funcBtns","cropCallback","closeCallback","uploadCallback","$cropBtns","html","innerHTML","$uploadBtn","removeEventListener","__uploadInput","uploadInput","$uploadInput","$cropBtn","__crop","crop","$aroundBtn","__around","around","$resetBtn","reset","__reset","$closeBtn","close","__close","rotateSlider","startAngle","endAngle","gapAngle","lineationItemWidth","parseInt","ceil","lineationWidth","$cropRotate","$lineation","$rotateCurrent","rotateStyle","getComputedStyle","rotateWidth","parseFloat","getPropertyValue","angle","startControl","transform","endControl","width","$cropMask","maskStyle","maskViewSize","height","cropCoverContext","getContext","devicePixelRatio","$cropScale","$scaleBtn","$scaleNum","$scaleOneTimes","$scaleTwoTimes","$scaleContainer","$scaleValue","$maxScale","scaleDownX","scaleInitLeft","getBoundingClientRect","left","scaleCurLeft","scaleWidth","size","positionOffset","top","cropSizePercent","times","cropRect","cropPoints","rectToPoints","cropCenter","getPointsCenter","src","setImage","getControlPoints","e","touches","clientX","clientY","getControlEvents","start","move","end","cancel","initScaleSlider","initScale","$target","classList","add","appendChild","coverWidth","coverHeight","clearRect","fillStyle","fillRect","borderRect","init","contentWidth","contentHeight","initContentPoints","contentPoints","slice","_contentCurMoveX","_contentCurMoveY","load","originImage","onload","getData","_orientation","getTag","getRealCotentSize","transformCoordinates","image","type","toString","Image","fileToSrc","show","hide","getCropImage","$resultCanvas","evt","files","target","controlEvents","ev","scaleMove","stopPropagation","rect","scaleMoveAt","moveX","curMoveX","preventDefault","$imageListenerEle","center","fingerLen","sqrt","pow","fingerScale","fingerCenter","passive","capture","newScale","translate","getFingerScaleTranslate","translateX","translateY","contentMove","scale","fingerPoints","point","push","newCenter","$cropContent","removeChild","imageCtx","rotate","PI","drawImage","_initTransform","position","insertBefore","scaleNum","cropWidth","cropHeight","ratio","$contentCanvas","contentCtx","$cropCanvas","isWholeCover","coverTr","getCoverTransform","coverMat","getTransformMatrix","f","getTransformPoints","indexOf","coverTrAr","substring","trim","split","no","tr","isTwoFingerEvent","pointX","newCurLeft","lastMoveX","moveY","rotateCover","scaleKeepCover","scMat","rotatePoints","coverScale","getCoverRectScale","changedX","totalMoveX","rotateCenter","centerVec","percent","vecLen","outer","inner","num","getCoverPointScale","rectA","rectB","isPointInRectCheckByLen","rectPoints","pcv","getPCVectorProjOnUpAndRight","uLen","uproj","up","rLen","rproj","right","onlyTranslate","cRect","getCoveRect","uScale","rScale","cup","cright","tup","tright","uAng","vecAngle","scalePoints","count","outDetails","getOutDetails","sort","a","b","aLen","iv","bLen","maxFarOut","maxFarPcv","uOver","rAng","rOver","pt","rad","nRect","sin","cos","points","matrix","nPoints","item","applyToPoint","reverse","transforms","result","func","getTransformFunctionName","compose","arr","toLowerCase","defParams","unshift","getProjectionVector","vecA","vecB","ab","line","round","isPointInRectCheckByAngle","vecs","sIndex","sLen","eVec","sVec","splice","tVec","angles","data","getMinAngle","vec","index","sum","toPrecision","aVec","minAngle","minIndex","vec1","vec2","acos","file","callback","reader","FileReader","readAsDataURL","prefixes","upper","memo","replace","_","char","toUpperCase","Key","charAt","dash","test","lastIndex","obj","EXIFwrapped","ExifTags","Tags","TiffTags","GPSTags","0","IFD1Tags","StringValues","ExposureProgram","1","2","3","4","5","6","7","8","MeteringMode","255","LightSource","9","10","11","12","13","14","15","17","18","19","20","21","22","23","24","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","Components","imageHasData","img","getImageData","handleBinaryFile","binFile","findEXIFinJPEG","exifdata","iptcdata","dataView","DataView","console","log","byteLength","getUint8","offset","isFieldSegmentStart","nameHeaderLength","startOffset","sectionLength","getUint16","readIPTCData","findIPTCinJPEG","isXmpEnabled","xmpdata","dom","DOMParser","getStringFromDB","xmpString","xmpEndIndex","indexOfXmp","xml2Object","parseFromString","findXMPinJPEG","base64","contentType","match","binary","atob","buffer","ArrayBuffer","view","Uint8Array","charCodeAt","base64ToArrayBuffer","fileReader","url","http","XMLHttpRequest","open","responseType","status","response","send","objectURLToBlob","blob","readAsArrayBuffer","Blob","File","marker","readEXIFData","IptcFieldMap","fieldValue","fieldName","dataSize","segmentType","segmentStartPos","getInt16","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","tag","entries","tags","readTagValue","vals","val","numerator","denominator","numValues","getUint32","valueOffset","Number","getInt32","outstr","String","fromCharCode","exifData","gpsData","tiffOffset","firstIFDOffset","ExifIFDPointer","GPSInfoIFDPointer","IFD1OffsetPointer","getNextIFDOffset","thumbTags","JpegIFOffset","JpegIFByteCount","tOffset","tLength","readThumbnailImage","xml2json","xml","json","nodeType","attributes","j","attribute","nodeName","nodeValue","hasChildNodes","childNodes","child","old","children","idx","itemAtt","dataKey","dataValue","textContent","message","enableXmp","disableXmp","HTMLImageElement","complete","getIptcTag","getAllTags","getAllIptcTags","pretty","strPretty","readFromBinaryFile","isArray","applyToPoints","map","fromObject","matrixRegex","fromString","string","parsed","Error","identity","inverse","denom","isUndefined","isNumeric","isFinite","isAffineMatrix","tx","ty","matrices","multiply","m1","m2","rest","cx","cy","cosAngle","sinAngle","rotationMatrix","rotateDEG","sx","sy","shear","shx","shy","tan","skew","ax","ay","skewDEG","toCSS","toSVG","smoothMatrix","precision","fromTriangles","t1","t2","px1","py1","px2","py2","qx1","qy1","qx2","qy2","rx1","ry1","rx2","ry2","fromDefinition","definitionOrArrayOfDefinition","mapper","descriptor","peg$SyntaxError","expected","found","location","captureStackTrace","peg$parse","input","peg$result","peg$FAILED","peg$startRuleFunctions","transformList","peg$parsetransformList","peg$startRuleFunction","peg$c0","peg$c1","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$r0","peg$r1","peg$r2","peg$r3","peg$e0","peg$literalExpectation","peg$e1","peg$e2","peg$e3","peg$e4","peg$e5","peg$e6","peg$e7","peg$e8","peg$e9","peg$otherExpectation","peg$e10","peg$classExpectation","peg$e11","peg$e12","peg$e13","peg$f0","ts","peg$f1","concat","peg$f2","peg$f3","peg$f4","peg$f5","peg$f6","peg$f7","peg$f8","join","peg$f9","peg$f10","peg$f11","n1","n2","peg$f12","ds","peg$f13","d1","d2","peg$f14","peg$currPos","peg$posDetailsCache","column","peg$expected","peg$silentFails","startRule","text","ignoreCase","parts","inverted","description","peg$computePosDetails","pos","details","peg$VALIDFILENAME","filename","peg$computeLocation","startPos","endPos","loc","startPosDetails","endPosDetails","peg$expect","variants","peg$buildStructuredError","buildMessage","s0","s1","s2","s3","s4","peg$parsewsp","peg$parsetransforms","peg$parsetransform","peg$parsecommaWsp","s5","s7","s9","s11","s13","s15","s16","s17","rule$expects","substr","peg$parsenumber","peg$parsematrix","s6","s8","peg$parsecommaWspNumber","peg$parsetranslate","peg$parsescale","peg$parsecommaWspTwoNumbers","peg$parserotate","peg$parseskewX","peg$parseskewY","peg$parsesign","peg$parsedigitSequence","peg$parsefractionalConstant","peg$parseexponent","peg$parsefloatingPointConstant","peg$parseintegerConstant","peg$parsecomma","peg$parsedigit","failPos","peg$buildError","parent","C","constructor","peg$subclass","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","class","escapedParts","part","classEscape","any","other","not","describeExpectation","hex","ch","descriptions","describeExpected","describeFound","fromTransformAttribute","transformString"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"simplecrop\"] = factory();\n\telse\n\t\troot[\"SimpleCrop\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable no-undef */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['prefix-umd', 'exif-js', 'transformation-matrix'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = factory(require('prefix-umd'), require('exif-js'), require('transformation-matrix'));\n    } else {\n        // Browser globals\n        window.SimpleCrop = factory(window.Prefix, window.EXIF, window.TransformationMatrix);\n    }\n}(function (Prefix, EXIF, TransformationMatrix) {\n    //兼容性处理\n    function whichTransitionEvent() {\n        var t;\n        var el = document.createElement('div');\n        var transitions = {\n            'transition': 'transitionend',\n            'OTransition': 'oTransitionEnd',\n            'MozTransition': 'transitionend',\n            'WebkitTransition': 'webkitTransitionEnd',\n            'MsTransition': 'msTransitionEnd'\n        };\n        for (t in transitions) {\n            if (el.style[t] !== undefined) {\n                return transitions[t];\n            }\n        }\n    }\n    var transitionEndEvent = whichTransitionEvent();\n    var transformProperty = Prefix.prefix('transform');\n    var transitionProperty = Prefix.prefix('transition');\n\n    //includes方法兼容\n    if (!Array.prototype.includes) {\n        Object.defineProperty(Array.prototype, 'includes', {\n            value: function (valueToFind, fromIndex) {\n                var o = Object(this);\n                var len = o.length >>> 0;\n                if (len === 0) {\n                    return false;\n                }\n\n                var n = fromIndex | 0;\n                var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n                function sameValueZero(x, y) {\n                    return x === y || (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));\n                }\n                while (k < len) {\n                    if (sameValueZero(o[k], valueToFind)) {\n                        return true;\n                    }\n                    k++;\n                }\n                return false;\n            }\n        });\n    }\n\n    /**\n     * ------------------------------------\n     * 配置\n     * @param title 标题\n     * @param visible 组件是否可见\n     * @param debug 是否开启调试模式（pc、mobile）\n     * @param $container 容器（pc、mobile）\n     * ------------------------------------\n     * 裁剪图片\n     * @param src   图片地址\n     * @param size 裁剪图片目标尺寸\n     * originImage 初始图片\n     * _orientation 图片方向\n     * ------------------------------------\n     * 裁剪框\n     * @param positionOffset 裁剪框屏幕偏移\n     * @param boldCornerLen 裁剪框边角加粗长度\n     * @param coverColor 遮罩背景颜色\n     * @param cropSizePercent 裁剪框占裁剪显示区域的比例\n     * @param borderWidth 裁剪框边框宽度\n     * @param borderColor 裁剪框边框颜色\n     * @param coverDraw 裁剪框辅助线绘制函数\n     * @param borderDraw 裁剪框边框绘制函数\n     * ------------------------------------\n     * 功能按钮\n     * @param funcBtns 功能按钮配置数组\n     * @param cropCallback 图片裁剪完成回调函数\n     * @param uploadCallback 重新上传裁剪图片回调函数\n     * @param closeCallback 关闭裁剪组件回调函数\n     * ------------------------------------\n     * 滑动控制条\n     * @param scaleSlider 是否开启滑动控制条（pc、mobile）\n     * @param maxScale 最大缩放倍数（pc、mobile）\n     * ------------------------------------\n     * 旋转刻度盘\n     * @param rotateSlider 是否开启旋转刻度盘\n     * @param startAngle 旋转刻度盘开始角度\n     * @param endAngle 旋转刻度盘结束角度\n     * @param gapAngle 旋转刻度盘间隔角度\n     * @param lineationItemWidth 旋转刻度盘间隔宽度\n     * lineationWidth 根据上述参数计算出的旋转刻度盘总宽度\n     * rotateWidth 旋转刻度盘显示宽度\n     * ------------------------------------\n     * 尺寸（为了减少计算的复杂性，所有坐标都统一为屏幕坐标及尺寸）\n     * maskViewSize 容器屏幕尺寸\n     * cropRect 截图框屏幕尺寸\n     * cropPoints 裁剪框顶点坐标\n     * cropCenter 裁剪框中心点坐标\n     * contentWidth 图片显示宽度\n     * contentHeight 图片显示高度\n     * contentPoints 图片顶点坐标\n     * initContentPoints 图片初始顶点坐标\n     * _contentCurMoveX 图片 X 轴方向上的总位移\n     * _contentCurMoveY 图片 Y 轴方向上的总位移\n     * ------------------------------------\n     * 双指缩放\n     * _multiPoint 是否开始多点触控\n     * fingerLen 双指距离\n     * fingerScale 双指缩放倍数\n     * fingerCenter 双指操作中心\n     * ------------------------------------\n     * 其它\n     * times 实际尺寸/显示尺寸\n     * initScale 初始缩放倍数\n     * $resultCanvas 裁切结果（pc、mobile）\n     * resultSrc 裁剪结果（wechat）\n     * isSupportTouch 是否支持 touch 事件（pc、mobile）\n     * passiveSupported 事件是否支持 passive（pc、mobile）\n     */\n    function SimpleCrop(params) {\n        //配置\n        this.id = 'crop-' + new Date().getTime();\n        this.visible = params.visible != null ? params.visible : true; //默认显示\n        this.title = params.title != null ? params.title : '';\n        this.debug = params.debug != null ? params.debug : false;\n        this.$container = params.$container != null ? params.$container : document.body; //容器\n\n        //滑动控制条\n        this.scaleSlider = params.scaleSlider != null ? params.scaleSlider : false;\n        this.maxScale = params.maxScale ? params.maxScale : 1; //最大缩放倍数，默认为原始尺寸\n\n        //其它\n        var self = this;\n        self.passiveSupported = false; //判断是否支持 passive\n        try {\n            var options = Object.defineProperty({}, 'passive', {\n                get: function () {\n                    self.passiveSupported = true;\n                }\n            })\n            window.addEventListener('test', null, options)\n        } catch (err) {\n            //nothing\n        }\n        this.isSupportTouch = 'ontouchend' in document ? true : false; //判断是否支持 touch 事件\n\n        //操作状态\n        this._multiPoint = false; //是否开始多点触控\n        this._rotateScale = 1; //旋转缩放倍数\n        this._baseMoveX = 0; //旋转刻度盘位置初始化偏移量\n        this._curMoveX = 0; //旋转刻度盘位置当前总偏移量\n        this._changedX = 0; //旋转刻度盘当前偏移量\n        this._downPoints = []; //操作点坐标数组\n        this._isControl = false; //是否正在操作\n        this._scaleMoveX = 0; //滑动缩放控件偏移量\n        /**\n         * 旋转交互分为两种：\n         * 一种是整角旋转（90度）；\n         * 另一种是基于整角旋转的基础上正负45度旋转。\n         */\n        this._baseAngle = 0;\n        this.scaleTimes = 1; //缩放倍数\n        this.rotateAngle = 0; //旋转角度\n\n        this.construct();\n        //注意 construct 和 bindEvent 中间函数的先后顺序\n        this.initFuncBtns(params); //初始化功能按钮\n        this.initRotateSlider(params); //初始化旋转刻度盘\n        this.initChilds();\n        this.initBoxBorder(params, true);\n        this.updateBox(params);\n        this.bindEvent();\n    }\n\n    //初始化标题\n    SimpleCrop.prototype.initTitle = function (params) {\n        this.title = params.title != null ? params.title : '';\n        this.$title = document.querySelector('#' + this.id + ' .crop-title');\n        this.$title.innerText = this.title;\n        if (!params.title) {\n            this.$title.style.visibility = '';\n        } else {\n            this.$title.style.visibility = 'hidden';\n        }\n    };\n\n    //初始化裁剪框边框以及辅助线\n    SimpleCrop.prototype.initBoxBorder = function (params, onlyInit) {\n        this.borderWidth = params.borderWidth != null ? params.borderWidth : 1;\n        this.borderColor = params.borderColor != null ? params.borderColor : '#fff';\n        this.boldCornerLen = params.boldCornerLen != null ? params.boldCornerLen : 24;\n        this.coverColor = params.coverColor != null ? params.coverColor : 'rgba(0,0,0,.3)';\n        this.coverDraw = params.coverDraw != null ? params.coverDraw : function () {};\n        this.borderDraw = params.borderDraw != null ? params.borderDraw : this.defaultBorderDraw;\n\n        if (!onlyInit) {\n            this.borderDraw(this.$cropCover);\n            this.coverDraw(this.$cropCover);\n        }\n    };\n\n    //初始化功能按钮\n    SimpleCrop.prototype.initFuncBtns = function (params) {\n        /**\n         * 默认功能按钮为取消、裁剪、90度旋转、重置\n         * upload 重新上传\n         * crop 裁剪\n         * close 取消\n         * around 90度旋转\n         * reset 重置\n         */\n        this.funcBtns = params.funcBtns != null ? params.funcBtns : ['close', 'crop', 'around', 'reset'];\n        this.cropCallback = params.cropCallback != null ? params.cropCallback : function () {};\n        this.closeCallback = params.closeCallback != null ? params.closeCallback : function () {};\n        this.uploadCallback = params.uploadCallback != null ? params.uploadCallback : function () {};\n\n        this.$cropBtns = document.querySelector('#' + this.id + ' .crop-btns');\n        var html = '';\n        if (this.funcBtns.includes('upload')) {\n            html += '<div class=\"upload-btn-container\">';\n            html += '<button class=\"upload-btn\"></button>';\n            html += '<input type=\"file\" accept=\"image/png,image/jpeg\">';\n            html += '</div>';\n        }\n        if (this.funcBtns.includes('close')) {\n            html += '<button class=\"crop-close\"></button>';\n        }\n        if (this.funcBtns.includes('around')) {\n            html += '<button class=\"crop-around\"></button>';\n        }\n        if (this.funcBtns.includes('reset')) {\n            html += '<button class=\"crop-reset\"></button>';\n        }\n        if (this.funcBtns.includes('crop')) {\n            html += '<button class=\"crop-btn\"></button>';\n        }\n        this.$cropBtns.innerHTML = html;\n\n        //重新上传\n        if (this.funcBtns.includes('upload')) {\n            if (this.$uploadBtn) {\n                this.$uploadBtn.removeEventListener('change', this.__uploadInput);\n            } else {\n                this.__uploadInput = this.uploadInput.bind(this);\n            }\n            this.$uploadBtn = document.querySelector('#' + this.id + ' .upload-btn-container');\n            this.$uploadInput = document.querySelector('#' + this.id + ' .upload-btn-container input');\n            this.$uploadBtn.addEventListener('change', this.__uploadInput);\n        }\n\n        //裁剪\n        if (this.funcBtns.includes('crop')) {\n            if (this.$cropBtn) {\n                this.$cropBtn.removeEventListener('click', this.__crop);\n            } else {\n                this.__crop = this.crop.bind(this);\n            }\n            this.$cropBtn = document.querySelector('#' + this.id + ' .crop-btn');\n            this.$cropBtn.addEventListener('click', this.__crop);\n        }\n\n        //整角旋转\n        if (this.funcBtns.includes('around')) {\n            if (this.$aroundBtn) {\n                this.$aroundBtn.removeEventListener('click', this.__around);\n            } else {\n                this.__around = this.around.bind(this);\n            }\n            this.$aroundBtn = document.querySelector('#' + this.id + ' .crop-around');\n            this.$aroundBtn.addEventListener('click', this.__around);\n        }\n\n        //还原\n        if (this.funcBtns.includes('reset')) {\n            if (this.$resetBtn) {\n                this.$resetBtn.removeEventListener('click', this.reset);\n            } else {\n                this.__reset = this.reset.bind(this);\n            }\n            this.$resetBtn = document.querySelector('#' + this.id + ' .crop-reset');\n            this.$resetBtn.addEventListener('click', this.__reset);\n        }\n\n        //关闭\n        if (this.funcBtns.includes('close')) {\n            if (this.$closeBtn) {\n                this.$closeBtn.removeEventListener('click', this.close);\n            } else {\n                this.__close = this.close.bind(this);\n            }\n            this.$closeBtn = document.querySelector('#' + this.id + ' .crop-close');\n            this.$closeBtn.addEventListener('click', this.__close);\n        }\n\n        if (this.funcBtns.length > 0) {\n            this.$cropBtns.style.visibility = '';\n        } else {\n            this.$cropBtns.style.visibility = 'hidden';\n        }\n    };\n\n    //初始化旋转刻度盘\n    SimpleCrop.prototype.initRotateSlider = function (params) {\n        this.rotateSlider = params.rotateSlider != null ? params.rotateSlider : true; //默认开启\n        this.startAngle = params.startAngle != null ? params.startAngle : -90;\n        this.endAngle = params.endAngle != null ? params.endAngle : 90;\n        this.gapAngle = params.gapAngle != null ? params.gapAngle : 10;\n        this.lineationItemWidth = params.lineationItemWidth != null ? params.lineationItemWidth : 40.5;\n        this.lineationItemWidth = this.lineationItemWidth >= 40.5 ? this.lineationItemWidth : 40.5; // 最小宽度限制\n\n        //开始角度需要小于0，结束角度需要大于0，且开始角度和结束角度之间存在大于0的整数个间隔\n        this.startAngle = this.startAngle < 0 ? parseInt(this.startAngle) : 0;\n        this.endAngle = this.endAngle > 0 ? parseInt(this.endAngle) : 0;\n        this.gapAngle = this.gapAngle > 0 ? parseInt(this.gapAngle) : 3;\n        if ((this.endAngle - this.startAngle) % this.gapAngle != 0) {\n            this.endAngle = Math.ceil((this.endAngle - this.startAngle) / this.gapAngle) * this.gapAngle + this.startAngle;\n        }\n        this.lineationWidth = this.lineationItemWidth * ((this.endAngle - this.startAngle) / this.gapAngle + 1);\n\n        this.$cropRotate = document.querySelector('#' + this.id + ' .crop-rotate');\n        this.$lineation = document.querySelector('#' + this.id + ' .lineation');\n        this.$rotateCurrent = document.querySelector('#' + this.id + ' .current');\n        var rotateStyle = window.getComputedStyle(this.$cropRotate);\n        this.rotateWidth = parseFloat(rotateStyle.getPropertyValue('width')); // 旋转刻度盘显示宽度\n        this._baseMoveX = -(this.lineationWidth * (0 - this.startAngle + this.gapAngle / 2) / (this.endAngle - this.startAngle + this.gapAngle) - this.rotateWidth / 2); //开始角度大于 0 且结束角度小于 0，以 0 度为起点\n        var angle = this.rotateAngle - this._baseAngle;\n        this._curMoveX = angle * this.lineationWidth / (this.endAngle - this.startAngle + this.gapAngle) + this._baseMoveX;\n\n        //超出滚动边界，旋转刻度盘重置\n        if (this._curMoveX > 0 || this._curMoveX < this.rotateWidth - this.lineationWidth) {\n            this.startControl();\n            this._curMoveX = this._baseMoveX;\n            this._baseAngle = 0;\n            this.rotateAngle = 0;\n            this._changedX = 0;\n            this._rotateScale = 1;\n            this.transform(true);\n            this.endControl();\n        }\n\n        //setData\n        var html = '';\n        for (var i = this.startAngle; i <= this.endAngle; i += this.gapAngle) {\n            html += '<li><div class=\"number\">' + i + '</div><div class=\"bg\"></div></li>';\n        }\n        this.$lineation.innerHTML = html;\n        this.$lineation.style.width = this.lineationWidth + 'px';\n        this.$lineation.style[transformProperty] = 'translateX(' + this._curMoveX + 'px)';\n        if (this.rotateSlider) {\n            this.$cropRotate.style.visibility = '';\n        } else {\n            this.$cropRotate.style.visibility = 'hidden';\n        }\n    };\n\n    //初始化相关子元素\n    SimpleCrop.prototype.initChilds = function () {\n        this.$cropMask = document.querySelector('#' + this.id + ' .crop-mask');\n        var maskStyle = window.getComputedStyle(this.$cropMask);\n        this.maskViewSize = {\n            width: parseInt(maskStyle.getPropertyValue('width')),\n            height: parseInt(maskStyle.getPropertyValue('height'))\n        }\n        this.$cropCover = document.querySelector('#' + this.id + ' .crop-cover');\n        this.cropCoverContext = this.$cropCover.getContext('2d');\n        this.$cropCover.width = this.maskViewSize.width * window.devicePixelRatio;\n        this.$cropCover.height = this.maskViewSize.height * window.devicePixelRatio;\n\n        //滑动控制条\n        this.$cropScale = document.querySelector('#' + this.id + ' .crop-scale');\n        this.$scaleBtn = document.querySelector('#' + this.id + ' .scale-btn');\n        this.$scaleNum = document.querySelector('#' + this.id + ' .scale-num');\n        this.$scaleOneTimes = document.querySelector('#' + this.id + ' .one-times-icon');\n        this.$scaleTwoTimes = document.querySelector('#' + this.id + ' .two-times-icon');\n        this.$scaleContainer = document.querySelector('#' + this.id + ' .scale-container');\n        this.$scaleValue = document.querySelector('#' + this.id + ' .scale-value');\n        this.$maxScale = document.querySelector('#' + this.id + ' .max-scale');\n        this.scaleDownX = 0;\n        this.scaleInitLeft = this.$scaleBtn.getBoundingClientRect().left;\n        this.scaleCurLeft = this.scaleInitLeft;\n        this.scaleWidth = this.$scaleNum.getBoundingClientRect().width;\n    };\n\n    //根据裁剪图片目标尺寸、裁剪框显示比例、裁剪框偏移更新等参数更新并重现绘制裁剪框\n    SimpleCrop.prototype.updateBox = function (params) {\n        this.size = params.size;\n        this.positionOffset = params.positionOffset != null ? params.positionOffset : {\n            top: 0,\n            left: 0\n        };\n        this.cropSizePercent = params.cropSizePercent != null ? params.cropSizePercent : 0.5; //默认0.5则表示高度或者宽度最多占50%\n        this.times = (this.size.width / this.maskViewSize.width > this.size.height / this.maskViewSize.height) ? this.size.width / this.maskViewSize.width / this.cropSizePercent : this.size.height / this.maskViewSize.height / this.cropSizePercent;\n\n        //裁剪框位置相关\n        this.cropRect = {\n            width: this.size.width / this.times,\n            height: this.size.height / this.times,\n        };\n        this.cropRect.left = (this.maskViewSize.width - this.cropRect.width) / 2 - this.positionOffset.left;\n        this.cropRect.top = (this.maskViewSize.height - this.cropRect.height) / 2 - this.positionOffset.top;\n        this.cropPoints = this.rectToPoints(this.cropRect);\n        this.cropCenter = this.getPointsCenter(this.cropPoints);\n\n        this.borderDraw(this.$cropCover);\n        this.coverDraw(this.$cropCover);\n\n        var src = params.src != null ? params.src : this.src;\n        this.setImage(src)\n    };\n\n    //获取操作点\n    SimpleCrop.prototype.getControlPoints = function (e) {\n        if (e.touches) {\n            return e.touches;\n        } else {\n            return [{\n                clientX: e.clientX,\n                clientY: e.clientY\n            }]\n        }\n    };\n\n    //获取操作事件名称\n    SimpleCrop.prototype.getControlEvents = function () {\n        if (this.isSupportTouch) {\n            return {\n                start: 'touchstart',\n                move: 'touchmove',\n                end: 'touchend',\n                cancel: 'touchcancel'\n            }\n        } else {\n            return {\n                start: 'mousedown',\n                move: 'mousemove',\n                end: 'mouseup',\n                cancel: 'mouseleave'\n            }\n        }\n    };\n\n    //初始化滑动控制条\n    SimpleCrop.prototype.initScaleSlider = function (params) {\n        if (params) {\n            this.scaleSlider = params.scaleSlider != null ? params.scaleSlider : false;\n            this.maxScale = params.maxScale ? params.maxScale : 1; //最大缩放倍数，默认为原始尺寸\n        }\n        this.scaleTimes = this.initScale;\n        this.maxScale = this.initScale < this.maxScale ? this.maxScale : Math.ceil(this.initScale);\n\n        this._scaleMoveX = 0;\n        this.scaleCurLeft = this.scaleInitLeft;\n        this.$maxScale.innerText = '(x' + this.maxScale + ')';\n        this.$scaleBtn.style[transformProperty] = 'translateX(0px)';\n        this.$scaleValue.style.width = '0px';\n\n        if (this.scaleSlider) {\n            this.$cropScale.style.visibility = '';\n        } else {\n            this.$cropScale.style.visibility = 'hidden';\n        }\n        this.transform(false, true);\n    };\n\n    //html结构\n    SimpleCrop.prototype.construct = function () {\n        var html = '';\n        html += '<div class=\"crop-component\">';\n        html += '<p class=\"crop-title\">' + this.title + '</p>';\n        html += '<div class=\"crop-mask\">'\n        html += '<canvas class=\"crop-cover\"></canvas>';\n        html += '</div>';\n\n        //滑动控制条\n        if (this.scaleSlider) {\n            html += '<div class=\"crop-scale\">';\n        } else {\n            html += '<div class=\"crop-scale\" style=\"visibility:hidden;\">';\n        }\n        html += '<div class=\"one-times-icon\"></div>';\n        html += '<div class=\"scale-container\">';\n        html += '<div class=\"scale-num\"><span class=\"scale-value\" style=\"width:0px;\"></span><span class=\"scale-btn\" style=\"left:-8px;\"></span></div>';\n        html += '</div>';\n        html += '<div class=\"two-times-icon\"></div>';\n        html += '<div class=\"max-scale\"></div>'\n        html += '</div>';\n\n        //旋转刻度盘\n        if (this.rotateSlider) {\n            html += '<div class=\"crop-rotate\">'\n        } else {\n            html += '<div class=\"crop-rotate\" style=\"visibility:hidden;\">'\n        }\n        html += '<ul class=\"lineation\">';\n        html += '</ul>';\n        html += '<div class=\"current\"></div>';\n        html += '</div>';\n\n        //功能按钮\n        html += '<div class=\"crop-btns\" style=\"visibility:hidden;\"></div>';\n        html += '</div>';\n\n        this.$target = document.createElement('div');\n        this.$target.id = this.id;\n        this.$target.classList.add('crop-whole-cover');\n        if (this.visible) {\n            this.$target.style.visibility = '';\n        } else {\n            this.$target.style.visibility = 'hidden';\n        }\n        this.$target.innerHTML = html;\n        this.$container.appendChild(this.$target);\n\n    };\n\n    //默认绘制裁剪框\n    SimpleCrop.prototype.defaultBorderDraw = function ($cropCover) {\n        var borderWidth = this.borderWidth;\n        var boldCornerLen = this.boldCornerLen;\n        boldCornerLen = boldCornerLen >= borderWidth * 2 ? boldCornerLen : borderWidth * 2;\n\n        var coverWidth = $cropCover.width;\n        var coverHeight = $cropCover.height;\n        this.cropCoverContext.clearRect(0, 0, coverWidth, coverHeight);\n        this.cropCoverContext.fillStyle = this.coverColor;\n        this.cropCoverContext.fillRect(0, 0, coverWidth, coverHeight);\n\n        //绘制边框（边框内嵌）\n        var borderRect = {\n            left: this.cropRect.left * window.devicePixelRatio,\n            top: this.cropRect.top * window.devicePixelRatio,\n            width: this.cropRect.width * window.devicePixelRatio,\n            height: this.cropRect.height * window.devicePixelRatio\n        }\n        this.cropCoverContext.fillStyle = this.borderColor;\n        this.cropCoverContext.fillRect(borderRect.left, borderRect.top, borderRect.width, borderRect.height);\n\n        if (this.boldCornerLen > 0) {\n            //边框四个角加粗\n            this.cropCoverContext.fillRect(borderRect.left - borderWidth, borderRect.top - borderWidth, boldCornerLen, boldCornerLen); //左上角\n            this.cropCoverContext.fillRect(borderRect.left + borderRect.width - boldCornerLen + borderWidth, borderRect.top - borderWidth, boldCornerLen, boldCornerLen); //右上角\n            this.cropCoverContext.fillRect(borderRect.left - borderWidth, borderRect.top + borderRect.height - boldCornerLen + borderWidth, boldCornerLen, boldCornerLen); //左下角\n            this.cropCoverContext.fillRect(borderRect.left + borderRect.width - boldCornerLen + borderWidth, borderRect.top + borderRect.height - boldCornerLen + borderWidth, boldCornerLen, boldCornerLen); //右下角\n        }\n\n        //清空内容区域\n        this.cropCoverContext.clearRect(borderRect.left + borderWidth, borderRect.top + borderWidth, borderRect.width - 2 * borderWidth, borderRect.height - 2 * borderWidth);\n    };\n\n    //初始化\n    SimpleCrop.prototype.init = function () {\n        var width = this.contentWidth / 2;\n        var height = this.contentHeight / 2;\n        this.initContentPoints = [{\n            x: -width,\n            y: height\n        }, {\n            x: width,\n            y: height\n        }, {\n            x: width,\n            y: -height\n        }, {\n            x: -width,\n            y: -height\n        }]\n        this.contentPoints = this.initContentPoints.slice();\n\n        //计算初始缩放倍数\n        if (this.size.width / this.size.height > this.contentWidth / this.contentHeight) {\n            this.initScale = this.size.width / this.contentWidth;\n        } else {\n            this.initScale = this.size.height / this.contentHeight;\n        }\n\n        this.reset();\n    };\n\n    //重置\n    SimpleCrop.prototype.reset = function () {\n        this.startControl();\n        this._contentCurMoveX = -this.positionOffset.left;\n        this._contentCurMoveY = -this.positionOffset.top;\n\n        this._rotateScale = 1;\n        this._baseAngle = 0;\n        this.rotateAngle = 0;\n        this._curMoveX = this._baseMoveX;\n        this._changedX = 0;\n        this.$lineation.style[transformProperty] = 'translateX(' + this._baseMoveX + 'px)';\n\n        this.initScaleSlider();\n        this.endControl();\n    };\n\n    //加载图片\n    SimpleCrop.prototype.load = function () {\n        var self = this;\n        self.originImage.onload = function () {\n            EXIF.getData(self.originImage, function () {\n                self._orientation = EXIF.getTag(this, 'Orientation');\n                self.getRealCotentSize();\n                self.transformCoordinates();\n                self.init();\n            });\n        }\n    };\n\n    //设置裁剪图片\n    SimpleCrop.prototype.setImage = function (image) {\n        if (image != null && image != '') {\n            var self = this;\n            var type = Object.prototype.toString.call(image);\n            if (type === '[object String]') { //字符串\n                self.src = image;\n                self.originImage = new Image();\n                self.originImage.src = self.src;\n                self.load();\n                self.uploadCallback(self.src);\n            } else if (type === '[object File]') { //文件\n                self.fileToSrc(image, function (src) {\n                    self.src = src;\n                    self.originImage = new Image();\n                    self.originImage.src = self.src;\n                    self.load();\n                    self.uploadCallback(self.src);\n                });\n            }\n        }\n    };\n\n    //显示\n    SimpleCrop.prototype.show = function (image) {\n        if (image) {\n            this.setImage(image);\n        }\n        this.visible = true;\n        this.$target.style.visibility = '';\n    };\n\n    //隐藏\n    SimpleCrop.prototype.hide = function () {\n        this.visible = false;\n        this.$target.style.visibility = 'hidden';\n    };\n\n    //关闭\n    SimpleCrop.prototype.close = function () {\n        this.hide();\n        this.closeCallback();\n    };\n\n    //裁剪\n    SimpleCrop.prototype.crop = function () {\n        this.getCropImage();\n        this.cropCallback(this.$resultCanvas);\n        this.hide();\n    };\n\n    //上传\n    SimpleCrop.prototype.uploadInput = function (evt) {\n        var files = evt.target.files;\n        if (files.length > 0) {\n            this.show(files[0]);\n        }\n        this.$uploadInput.value = ''; //清空value属性，从而保证用户修改文件内容但是没有修改文件名时依然能上传成功\n    };\n\n    //整角旋转\n    SimpleCrop.prototype.around = function () {\n        this.startControl();\n        this.rotateAngle = (this._baseAngle - 90) % 360;\n        this._baseAngle = this.rotateAngle;\n        this._curMoveX = this._baseMoveX;\n        this._changedX = 0;\n        this._rotateScale = 1;\n        this.$lineation.style[transformProperty] = 'translateX(' + this._baseMoveX + 'px)';\n        this.transform(false, true);\n        this.endControl();\n    };\n\n    //事件监听\n    SimpleCrop.prototype.bindEvent = function () {\n        var self = this;\n        var controlEvents = this.getControlEvents();\n\n        //滑动控制条\n        // ------------------ //\n        self.$scaleBtn.addEventListener(controlEvents.start, function (ev) {\n            self.scaleDownX = self.getControlPoints(ev)[0].clientX;\n            self.startControl();\n        });\n        self.$scaleContainer.addEventListener(controlEvents.move, function (ev) {\n            self.scaleMove(ev);\n            ev.stopPropagation();\n        });\n        self.$scaleContainer.addEventListener(controlEvents.cancel, self.endControl.bind(self)); //结束\n        self.$scaleContainer.addEventListener(controlEvents.end, self.endControl.bind(self));\n        self.$scaleContainer.addEventListener('click', function (ev) {\n            self.startControl();\n            var rect = self.$scaleBtn.getBoundingClientRect();\n            if (self.scaleDownX <= 0) {\n                self.scaleDownX = rect.left + rect.width * 1.0 / 2;\n            }\n            self.scaleMove(ev);\n            self.endControl();\n        });\n        self.$scaleOneTimes.addEventListener('click', function () { //极小\n            self.startControl();\n            self.scaleMoveAt(0);\n            self.endControl();\n        });\n        self.$scaleTwoTimes.addEventListener('click', function () { //极大\n            self.startControl();\n            self.scaleMoveAt(self.scaleWidth);\n            self.endControl();\n        });\n        // ------------------ //\n\n        //旋转刻度盘\n        // ------------------ //\n        self.$cropRotate.addEventListener(controlEvents.start, function (e) {\n            var touches = self.getControlPoints(e);\n            self.startControl(touches);\n        });\n        self.$cropRotate.addEventListener(controlEvents.move, function (e) {\n            var touches = self.getControlPoints(e);\n            if (self._downPoints && self._downPoints.length > 0 && !self._multiPoint) {\n                var point = touches[0];\n                var moveX = point.clientX - self._downPoints[0].clientX;\n                var lastMoveX = self._curMoveX;\n                var curMoveX = lastMoveX + moveX;\n                if (curMoveX <= 0 && curMoveX >= (self.rotateWidth - self.lineationWidth)) { //滚动边界\n                    var angle = (curMoveX - self._baseMoveX) / self.lineationWidth * (self.endAngle - self.startAngle + self.gapAngle);\n                    self._curMoveX = curMoveX;\n                    self._changedX = moveX;\n                    self.$lineation.style[transformProperty] = 'translateX(' + curMoveX + 'px)';\n                    self.rotateAngle = self._baseAngle + angle;\n                    self.transform(true);\n                    self._downPoints = touches;\n                }\n            }\n            e.stopPropagation(); //阻止事件冒泡\n            e.preventDefault();\n        });\n        self.$cropRotate.addEventListener(controlEvents.end, self.endControl.bind(self)); //结束\n        self.$cropRotate.addEventListener(controlEvents.cancel, self.endControl.bind(self));\n        // ------------------ //\n\n        //裁剪图片移动、双指缩放操作\n        // ------------------ //\n        var $imageListenerEle = self.isSupportTouch ? self.$container : self.$cropMask;\n        $imageListenerEle.addEventListener(controlEvents.start, function (ev) {\n            var touches = self.getControlPoints(ev);\n            self.startControl(touches);\n            self._multiPoint = false;\n            if (self._downPoints && self._downPoints.length >= 2) {\n                self._multiPoint = true;\n                var center = {\n                    clientX: (self._downPoints[0].clientX + self._downPoints[1].clientX) / 2,\n                    clientY: (self._downPoints[0].clientY + self._downPoints[1].clientY) / 2\n                };\n                self.fingerLen = Math.sqrt(Math.pow(self._downPoints[0].clientX - self._downPoints[1].clientX, 2) + Math.pow(self._downPoints[0].clientY - self._downPoints[1].clientY, 2));\n                self.fingerScale = 1;\n                self.fingerCenter = { //双指操作中心\n                    x: center.clientX - self.maskViewSize.width / 2,\n                    y: self.maskViewSize.height / 2 - center.clientY\n                }\n            }\n        });\n        var options = self.passiveSupported ? { // 如果浏览器支持 passive event listener 为了保证截图操作时页面不滚动需要设置为 false\n            passive: false,\n            capture: false\n        } : false;\n        $imageListenerEle.addEventListener(controlEvents.move, function (ev) {\n            var touches = self.getControlPoints(ev);\n            if (self._downPoints && self._downPoints.length > 0) {\n                if (!self._multiPoint) { // 单指移动\n                    self.contentMove(touches);\n                } else { // 双指缩放\n                    var newFingerLen = Math.sqrt(Math.pow(touches[0].clientX - touches[1].clientX, 2) + Math.pow(touches[0].clientY - touches[1].clientY, 2));\n                    var newScale = newFingerLen / self.fingerLen;\n                    self.scaleTimes = self.scaleTimes / self.fingerScale * newScale;\n                    var translate = self.getFingerScaleTranslate(newScale / self.fingerScale);\n                    self._contentCurMoveX -= translate.translateX;\n                    self._contentCurMoveY += translate.translateY;\n                    self.fingerScale = newScale;\n                    self.transform(false, true);\n                }\n            }\n            if (self.visible) { //组件显示状态才屏蔽掉一些事件的默认行为，防止组件关闭后继续影响页面\n                ev.preventDefault();\n            }\n        }, options);\n        $imageListenerEle.addEventListener(controlEvents.end, self.endControl.bind(self)); //结束\n        $imageListenerEle.addEventListener(controlEvents.cancel, self.endControl.bind(self));\n        // ------------------ //\n    };\n\n    //双指缩放优化为以双指中心为基础点，实际变换以中心点为基准点，因此需要计算两者的偏移\n    SimpleCrop.prototype.getFingerScaleTranslate = function (scale) {\n        var fingerPoints = []; //以双指中心缩放的新坐标\n        var center = this.getPointsCenter(this.contentPoints); //中心点不变\n        for (var i = 0; i < this.contentPoints.length; i++) {\n            var point = this.contentPoints[i];\n            fingerPoints.push({\n                x: point.x * scale - this.fingerCenter.x * (scale - 1),\n                y: point.y * scale - this.fingerCenter.y * (scale - 1)\n            })\n        }\n        var newCenter = this.getPointsCenter(fingerPoints);\n        return {\n            translateX: center.x - newCenter.x,\n            translateY: center.y - newCenter.y\n        }\n    }\n\n    //根据图片方向计算源图片实际宽高\n    SimpleCrop.prototype.getRealCotentSize = function () {\n        this.contentWidth = this.originImage.width;\n        this.contentHeight = this.originImage.height;\n        //图片方向大于 4 时宽高互换\n        if (this._orientation > 4) {\n            this.contentWidth = this.originImage.height;\n            this.contentHeight = this.originImage.width;\n        }\n    }\n\n    //处理图片方向\n    SimpleCrop.prototype.transformCoordinates = function () {\n        if (this.$cropContent) {\n            this.$cropMask.removeChild(this.$cropContent);\n        }\n\n        this.$cropContent = document.createElement('canvas');\n        this.$cropContent.width = this.contentWidth;\n        this.$cropContent.height = this.contentHeight;\n        var imageCtx = this.$cropContent.getContext('2d');\n\n        var width = this.originImage.width;\n        var height = this.originImage.height;\n\n        switch (this._orientation) {\n            case 2:\n                // horizontal flip\n                imageCtx.translate(width, 0);\n                imageCtx.scale(-1, 1);\n                break;\n            case 3:\n                // 180° rotate left\n                imageCtx.translate(width, height);\n                imageCtx.rotate(Math.PI);\n                break;\n            case 4:\n                // vertical flip\n                imageCtx.translate(0, height);\n                imageCtx.scale(1, -1);\n                break;\n            case 5:\n                // vertical flip + 90 rotate right\n                imageCtx.rotate(0.5 * Math.PI);\n                imageCtx.scale(1, -1);\n                break;\n            case 6:\n                // 90° rotate right\n                imageCtx.rotate(0.5 * Math.PI);\n                imageCtx.translate(0, -height);\n                break;\n            case 7:\n                // horizontal flip + 90 rotate right\n                imageCtx.rotate(0.5 * Math.PI);\n                imageCtx.translate(width, -height);\n                imageCtx.scale(-1, 1);\n                break;\n            case 8:\n                // 90° rotate left\n                imageCtx.rotate(-0.5 * Math.PI);\n                imageCtx.translate(-width, 0);\n                break;\n        }\n        imageCtx.drawImage(this.originImage, 0, 0, width, height);\n\n        //初始位置垂直水平居中\n        this._initTransform = 'translate3d(-50%,-50%,0)';\n        this.$cropContent.classList.add('crop-content');\n        this.$cropContent.style.position = 'absolute';\n        this.$cropContent.style.left = '50%';\n        this.$cropContent.style.top = '50%';\n        this.$cropContent.style[transformProperty] = this._initTransform;\n        this.$cropMask.insertBefore(this.$cropContent, this.$cropCover);\n    }\n\n    //获取裁剪图片\n    SimpleCrop.prototype.getCropImage = function () {\n        var scaleNum = this.scaleTimes / this.times * this._rotateScale;\n        var contentWidth = this.contentWidth;\n        var contentHeight = this.contentHeight;\n        var cropWidth = this.size.width;\n        var cropHeight = this.size.height;\n\n        //需要考虑裁剪图片实际尺寸比裁剪尺寸小的情况\n        var ratio = 1;\n        if (contentWidth < cropWidth || contentHeight < cropHeight) { // 裁剪中间画布尺寸必须大于实际裁剪尺寸\n            if (cropWidth / contentWidth > cropHeight / contentHeight) {\n                ratio = cropWidth / contentWidth;\n                contentHeight = contentHeight * ratio;\n                contentWidth = cropWidth;\n            } else {\n                ratio = cropHeight / contentHeight;\n                contentWidth = contentWidth * ratio\n                contentHeight = cropHeight;\n            }\n        }\n        var center = {\n            x: contentWidth / 2,\n            y: contentHeight / 2\n        };\n\n        var $contentCanvas = document.createElement('canvas');\n        $contentCanvas.width = contentWidth;\n        $contentCanvas.height = contentHeight;\n        var contentCtx = $contentCanvas.getContext('2d');\n        contentCtx.translate(center.x, center.y);\n        contentCtx.scale(scaleNum * this.times / ratio, scaleNum * this.times / ratio) // 缩放 this.times\n        contentCtx.translate((this._contentCurMoveX + this.positionOffset.left) / scaleNum * ratio, (this._contentCurMoveY + this.positionOffset.top) / scaleNum * ratio);\n        contentCtx.rotate(this.rotateAngle / 180 * Math.PI);\n        contentCtx.translate(-center.x, -center.y);\n        contentCtx.drawImage(this.$cropContent, 0, 0, contentWidth, contentHeight);\n\n        var $cropCanvas = document.createElement('canvas');\n        $cropCanvas.width = cropWidth;\n        $cropCanvas.height = cropHeight;\n        var cropCtx = $cropCanvas.getContext('2d');\n        cropCtx.drawImage($contentCanvas, (contentWidth - cropWidth) / 2, (contentHeight - cropHeight) / 2, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n        this.$resultCanvas = $cropCanvas;\n    };\n\n    //操作结束\n    SimpleCrop.prototype.endControl = function () {\n        if (this._isControl) {\n            var self = this;\n            this._downPoints = [];\n            this.scaleDownX = 0;\n\n            if (this.$cropContent && !this.isWholeCover(this.contentPoints, this.cropPoints)) { //如果没有完全包含则需要进行适配变换\n                var scaleNum = this.scaleTimes / this.times * this._rotateScale;\n                var transform = '';\n                transform += ' scale(' + scaleNum + ')'; //缩放\n                transform += ' translateX(' + this._contentCurMoveX / scaleNum + 'px) translateY(' + this._contentCurMoveY / scaleNum + 'px)'; //移动\n                transform += ' rotate(' + this.rotateAngle + 'deg) ';\n\n                //适配变换\n                var coverTr = this.getCoverTransform(transform);\n                var coverMat = this.getTransformMatrix(coverTr);\n                this._contentCurMoveX = coverMat.e;\n                this._contentCurMoveY = coverMat.f;\n                this.contentPoints = this.getTransformPoints('scaleY(-1)' + coverTr, this.initContentPoints);\n\n                if (!this.debug) {\n                    this.$cropContent.style[transformProperty] = this._initTransform + coverTr;\n                } else {\n                    this.$cropContent.style[transitionProperty] = 'transform .5s linear';\n                    var start = coverTr.indexOf(transform) + transform.length;\n                    var coverTrAr = coverTr.substring(start, coverTr.length).trim().split(' ');\n                    var no = 0;\n                    var tr = this._initTransform + transform + coverTrAr[no];\n                    this.$cropContent.style[transformProperty] = tr;\n                    this.$cropContent.addEventListener(transitionEndEvent, function () {\n                        no++;\n                        if (no < coverTr.length) {\n                            tr += coverTrAr[no];\n                            self.$cropContent.style[transformProperty] = tr;\n                        }\n                    });\n                }\n            }\n\n            this._isControl = false;\n        }\n    };\n\n    //操作开始\n    SimpleCrop.prototype.startControl = function (touches) {\n        touches = touches ? touches : [];\n        if (!this._isControl || this.isTwoFingerEvent(touches)) {\n            this._isControl = true;\n            if (this.$cropContent) {\n                this.$cropContent.style[transitionProperty] = 'none';\n            }\n            this._downPoints = touches;\n        }\n    };\n\n    //双指操作事件\n    SimpleCrop.prototype.isTwoFingerEvent = function (touches) {\n        /**\n         * 微信小程序双指操作时，会触发两次 touchstart 事件且前后两次事件触摸点坐标有一个坐标相同\n         */\n        if (this._isControl && this._downPoints && this._downPoints.length == 1 && touches.length >= 2 &&\n            ((touches[0].clientX == this._downPoints[0].clientX && touches[0].clientY == this._downPoints[0].clientY) || (touches[1].clientX == this._downPoints[0].clientX && touches[1].clientY == this._downPoints[0].clientY))) {\n            return true;\n        }\n        return false;\n    };\n\n    //滑动控制条按钮移动\n    SimpleCrop.prototype.scaleMove = function (ev) {\n        if (this.scaleDownX > 0) {\n            var pointX = this.getControlPoints(ev)[0].clientX;\n            var moveX = pointX - this.scaleDownX;\n            var newCurLeft = this.scaleCurLeft + moveX;\n            if (newCurLeft >= this.scaleInitLeft && newCurLeft <= (this.scaleWidth + this.scaleInitLeft)) {\n                var lastMoveX = this._scaleMoveX;\n                if (!lastMoveX) {\n                    lastMoveX = 0;\n                }\n                var curMoveX = lastMoveX + moveX;\n                this.scaleDownX = pointX;\n                this.scaleMoveAt(curMoveX);\n            }\n        }\n    }\n\n    //移动滑动控制条按钮到某个位置\n    SimpleCrop.prototype.scaleMoveAt = function (curMoveX) {\n        this.$scaleBtn.style[transformProperty] = 'translateX(' + curMoveX + 'px)';\n        this.$scaleValue.style.width = curMoveX + 'px';\n        this._scaleMoveX = curMoveX;\n        this.scaleCurLeft = this.scaleInitLeft + curMoveX;\n        this.scaleTimes = this.initScale + curMoveX * 1.0 / this.scaleWidth * (this.maxScale - this.initScale);\n        this.transform(false, true);\n    };\n\n    //内容图片移动\n    SimpleCrop.prototype.contentMove = function (touches) {\n        var point = touches[0];\n        var moveX = point.clientX - this._downPoints[0].clientX;\n        var moveY = point.clientY - this._downPoints[0].clientY;\n\n        this._contentCurMoveX += moveX;\n        this._contentCurMoveY += moveY;\n        this._downPoints = touches;\n\n        this.transform();\n    };\n\n    //旋转、缩放、移动\n    SimpleCrop.prototype.transform = function (rotateCover, scaleKeepCover) {\n        if (this.$cropContent) {\n            var scaleNum = this.scaleTimes / this.times * this._rotateScale;\n            var transform = '';\n            transform += ' scale(' + scaleNum + ')'; //缩放\n            transform += ' translateX(' + this._contentCurMoveX / scaleNum + 'px) translateY(' + this._contentCurMoveY / scaleNum + 'px)'; //移动\n            transform += ' rotate(' + this.rotateAngle + 'deg)';\n\n            if (scaleKeepCover) { //缩放时为了保证裁剪框不出现空白，需要在原有变换的基础上再进行一定的位移变换\n                transform = this.getCoverTransform(transform, true);\n                var scMat = this.getTransformMatrix(transform);\n                this._contentCurMoveX = scMat.e;\n                this._contentCurMoveY = scMat.f;\n            }\n\n            if (rotateCover) { //旋转时需要保证裁剪框不出现空白，需要在原有变换的基础上再进行一定的适配变换\n                var rotatePoints = this.getTransformPoints('scaleY(-1)' + transform, this.initContentPoints);\n                var coverScale = this.getCoverRectScale(rotatePoints, this.cropPoints);\n                var changedX = this._changedX;\n                var curMoveX = this._curMoveX;\n                var totalMoveX = curMoveX - changedX - this._baseMoveX;\n                var rotateCenter = this.getPointsCenter(rotatePoints);\n                var centerVec = {\n                    x: rotateCenter.x - this.cropCenter.x,\n                    y: rotateCenter.y - this.cropCenter.y\n                }\n                var percent = Math.abs(changedX) / Math.abs(totalMoveX);\n                if (coverScale > 1) {\n                    this._rotateScale = this._rotateScale * coverScale;\n                    scaleNum = scaleNum * coverScale;\n                } else if (this.vecLen(centerVec) < 1 && percent > 0) { //中心点接近重合时，旋转支持自适应缩小\n                    if (coverScale < (1 - percent)) { //不能突变\n                        coverScale = 1 - percent;\n                    }\n                    if (this._rotateScale * coverScale > 1) {\n                        this._rotateScale = this._rotateScale * coverScale;\n                    } else { //不能影响 scaleTimes\n                        this._rotateScale = 1;\n                        coverScale = 1;\n                    }\n                    scaleNum = scaleNum * coverScale;\n                }\n            }\n\n            //操作变换\n            transform = '';\n            transform += ' scale(' + scaleNum + ')'; //缩放\n            transform += ' translateX(' + this._contentCurMoveX / scaleNum + 'px) translateY(' + this._contentCurMoveY / scaleNum + 'px)'; //移动\n            transform += ' rotate(' + this.rotateAngle + 'deg)';\n            this.$cropContent.style[transformProperty] = this._initTransform + transform;\n            this.contentPoints = this.getTransformPoints('scaleY(-1)' + transform, this.initContentPoints);\n        }\n    };\n\n    //计算一个矩形刚好包含另一个矩形需要的缩放倍数\n    SimpleCrop.prototype.getCoverRectScale = function (outer, inner) {\n        var scale = 0;\n        for (var i = 0; i < inner.length; i++) {\n            var num = this.getCoverPointScale(inner[i], outer);\n            if (num > scale) {\n                scale = num;\n            }\n        }\n        return scale;\n    };\n\n    //判断 矩形A 是否完全包含 矩形B\n    SimpleCrop.prototype.isWholeCover = function (rectA, rectB) {\n        for (var i = 0; i < rectB.length; i++) {\n            if (!this.isPointInRectCheckByLen(rectB[i], rectA)) {\n                return false;\n            }\n        }\n        return true;\n    };\n\n    //计算一个矩形刚好包含矩形外一点需要的缩放倍数\n    SimpleCrop.prototype.getCoverPointScale = function (point, rectPoints) {\n        var pcv = this.getPCVectorProjOnUpAndRight(point, rectPoints);\n\n        //计算矩形外一点到矩形中心向量在矩形边框向量上的投影距离\n        var uLen = this.vecLen(pcv.uproj);\n        var height = this.vecLen(pcv.up) / 2;\n        var rLen = this.vecLen(pcv.rproj);\n        var width = this.vecLen(pcv.right) / 2;\n\n        //根据投影距离计算缩放倍数\n        if (uLen / height > rLen / width) {\n            return 1 + (uLen - height) / height;\n        } else {\n            return 1 + (rLen - width) / width;\n        }\n    };\n\n    //计算图片内容刚好包含裁剪框的transform变换\n    SimpleCrop.prototype.getCoverTransform = function (transform, onlyTranslate) {\n        var cRect = this.getCoveRect(this.cropPoints, this.rotateAngle);\n        onlyTranslate = onlyTranslate ? onlyTranslate : false;\n\n        //计算放大倍数\n        var uScale = 1; //水平缩放倍数和垂直缩放倍数\n        var rScale = 1;\n        var cup = {\n            x: this.contentPoints[1].x - this.contentPoints[2].x,\n            y: this.contentPoints[1].y - this.contentPoints[2].y\n        }\n        var cright = {\n            x: this.contentPoints[1].x - this.contentPoints[0].x,\n            y: this.contentPoints[1].y - this.contentPoints[0].y\n        }\n        var tup = {\n            x: cRect[1].x - cRect[2].x,\n            y: cRect[1].y - cRect[2].y\n        }\n        var tright = {\n            x: cRect[1].x - cRect[0].x,\n            y: cRect[1].y - cRect[0].y\n        }\n        var uAng = this.vecAngle(cup, tup);\n        if (Math.abs(180 - uAng) < Math.abs(90 - uAng) || Math.abs(0 - uAng) < Math.abs(90 - uAng)) { //更接近180或者0\n            uScale = this.vecLen(tup) / this.vecLen(cup);\n            rScale = this.vecLen(tright) / this.vecLen(cright);\n        } else {\n            uScale = this.vecLen(tup) / this.vecLen(cright);\n            rScale = this.vecLen(tright) / this.vecLen(cup);\n        }\n        uScale = uScale < 1 ? 1 : uScale;\n        rScale = rScale < 1 ? 1 : rScale;\n\n        var scale = uScale > rScale ? uScale : rScale;\n\n        if (onlyTranslate && scale > 1) {\n            return transform;\n        }\n\n        //复制坐标\n        var scalePoints = [];\n        for (var i = 0; i < this.contentPoints.length; i++) {\n            scalePoints.push({\n                x: this.contentPoints[i].x,\n                y: this.contentPoints[i].y\n            });\n        }\n\n        //计算放大后的新坐标\n        if (scale > 1) {\n            transform += ' scale(' + scale + ')';\n            this.scaleTimes = this.scaleTimes * scale;\n            //this._rotateScale = this._rotateScale * scale; // this._rotateScale 只能受旋转角度影响\n            scalePoints = this.getTransformPoints('scaleY(-1)' + transform, this.initContentPoints);\n        }\n\n        //位移变换\n        var scaleNum = this.scaleTimes / this.times * this._rotateScale;\n        var count = 0;\n        var self = this;\n        var outDetails = [];\n        do {\n            //找出裁剪框超出的顶点\n            outDetails = this.getOutDetails(this.cropPoints, scalePoints);\n            if (outDetails.length > 0) {\n                count++;\n                outDetails.sort(function (a, b) { //找出距离最远的点\n                    var aLen = self.vecLen(a.iv);\n                    var bLen = self.vecLen(b.iv);\n                    if (aLen < bLen) {\n                        return 1;\n                    }\n                    if (aLen > bLen) {\n                        return -1;\n                    }\n                    return 0;\n                });\n\n                //开始移动\n                var maxFarOut = outDetails[0];\n                var maxFarPcv = maxFarOut.pcv;\n\n                //计算X轴位移\n                uAng = this.vecAngle(maxFarPcv.up, maxFarPcv.uproj);\n                var uLen = this.vecLen(maxFarPcv.uproj);\n                var moveY = 0;\n\n                //if(uAng == 0){ //同方向\n                if (Math.abs(uAng) < 90) { //浮点数精度问题，接近0时小于90 ，接近180时大于90\n                    moveY = -uLen * maxFarOut.uOver;\n                } else {\n                    moveY = uLen * maxFarOut.uOver;\n                }\n                if (moveY != 0) {\n                    transform += ' translateY(' + moveY / scaleNum + 'px)';\n                }\n\n                //计算Y轴位移\n                var rAng = this.vecAngle(maxFarPcv.right, maxFarPcv.rproj);\n                var rLen = this.vecLen(maxFarPcv.rproj);\n                var moveX = 0;\n\n                if (Math.abs(rAng) < 90) { //同方向\n                    moveX = rLen * maxFarOut.rOver;\n                } else {\n                    moveX = -rLen * maxFarOut.rOver;\n                }\n                if (moveX != 0) {\n                    transform += ' translateX(' + moveX / scaleNum + 'px)';\n                }\n\n                //计算位移后的新坐标\n                if (moveX != 0 || moveY != 0) {\n                    for (i = 0; i < scalePoints.length; i++) {\n                        scalePoints[i].x = scalePoints[i].x + maxFarOut.iv.x,\n                            scalePoints[i].y = scalePoints[i].y + maxFarOut.iv.y;\n                    }\n                }\n            }\n        } while (count < 2 && outDetails.length > 0)\n\n        return transform;\n    }\n\n    //找出一个矩形在另一个矩形外的顶点数据\n    SimpleCrop.prototype.getOutDetails = function (inner, outer) {\n        var outDetails = [];\n        for (var i = 0; i < inner.length; i++) {\n            var pt = inner[i];\n            if (!this.isPointInRectCheckByLen(pt, outer)) {\n                var pcv = this.getPCVectorProjOnUpAndRight(pt, outer);\n                var iv = {\n                    x: 0,\n                    y: 0\n                };\n                var uLen = this.vecLen(pcv.uproj);\n                var height = this.vecLen(pcv.up) / 2;\n                var rLen = this.vecLen(pcv.rproj);\n                var width = this.vecLen(pcv.right) / 2;\n                var uOver = 0;\n                var rOver = 0;\n                if (uLen > height) {\n                    uOver = (uLen - height) / uLen;\n                    iv.x += pcv.uproj.x * uOver;\n                    iv.y += pcv.uproj.y * uOver;\n                }\n                if (rLen > width) {\n                    rOver = (rLen - width) / rLen;\n                    iv.x += pcv.rproj.x * rOver;\n                    iv.y += pcv.rproj.y * rOver;\n                }\n                outDetails.push({\n                    x: pt.x,\n                    y: pt.y,\n                    iv: iv,\n                    uOver: uOver,\n                    rOver: rOver,\n                    pcv: pcv\n                });\n            }\n        }\n        return outDetails;\n    }\n\n    //获取刚好包含某个矩形的新矩形\n    SimpleCrop.prototype.getCoveRect = function (rect, angle) {\n        if (angle < 0) {\n            angle = 90 + angle % 90;\n        } else {\n            angle = angle % 90;\n        }\n        var rad = angle / 180 * Math.PI;\n\n        var up = {\n            x: rect[1].x - rect[2].x,\n            y: rect[1].y - rect[2].y\n        }\n        var right = {\n            x: rect[1].x - rect[0].x,\n            y: rect[1].y - rect[0].y\n        }\n        var rLen = this.vecLen(right);\n        var uLen = this.vecLen(up);\n\n        var nRect = [];\n        nRect[0] = {};\n        nRect[0].x = rect[0].x + rLen * Math.sin(rad) * Math.sin(rad);\n        nRect[0].y = rect[0].y + rLen * Math.sin(rad) * Math.cos(rad);\n\n        nRect[1] = {};\n        nRect[1].x = rect[1].x + uLen * Math.sin(rad) * Math.cos(rad);\n        nRect[1].y = rect[1].y - uLen * Math.sin(rad) * Math.sin(rad);\n\n        nRect[2] = {};\n        nRect[2].x = rect[2].x - rLen * Math.sin(rad) * Math.sin(rad);\n        nRect[2].y = rect[2].y - rLen * Math.sin(rad) * Math.cos(rad);\n\n        nRect[3] = {};\n        nRect[3].x = rect[3].x - uLen * Math.sin(rad) * Math.cos(rad);\n        nRect[3].y = rect[3].y + uLen * Math.sin(rad) * Math.sin(rad);\n\n        return nRect;\n    }\n\n    //计算新的变换坐标\n    SimpleCrop.prototype.getTransformPoints = function (transform, points) {\n        var matrix = this.getTransformMatrix(transform);\n        var nPoints = [];\n        for (var i = 0; i < points.length; i++) {\n            var item = {\n                x: points[i].x,\n                y: points[i].y\n            };\n            item = TransformationMatrix.applyToPoint(matrix, item);\n            nPoints.push(item);\n        }\n        nPoints.reverse(); //顶点顺序发生了变化，需要颠倒\n\n        return nPoints;\n    }\n\n    //获得矩形点坐标中心\n    SimpleCrop.prototype.getPointsCenter = function (points) {\n        var center = {\n            x: (points[0].x + points[2].x) / 2,\n            y: (points[0].y + points[2].y) / 2,\n        }\n        return center;\n    };\n\n    //矩形位置形式转换为顶点坐标形式\n    SimpleCrop.prototype.rectToPoints = function (rect) {\n        var points = [];\n        points.push({\n            x: -(this.maskViewSize.width / 2 - rect.left),\n            y: this.maskViewSize.height / 2 - rect.top\n        });\n        points.push({\n            x: points[0].x + rect.width,\n            y: points[0].y\n        });\n        points.push({\n            x: points[1].x,\n            y: points[1].y - rect.height\n        });\n        points.push({\n            x: points[0].x,\n            y: points[2].y\n        });\n\n        return points;\n    };\n\n    //获取 css transform 属性对应的矩形形式\n    SimpleCrop.prototype.getTransformMatrix = function (transform) {\n        var transforms = transform.split(' ');\n        var params = [];\n        for (var i = 0; i < transforms.length; i++) {\n            if (transforms[i].trim() != '') { // 不能为空\n                var func = this.getTransformFunctionName(transforms[i]);\n                var result;\n                if (func.name != 'rotate') {\n                    result = TransformationMatrix[func.name](func.params[0], func.params[1]);\n                } else {\n                    result = TransformationMatrix[func.name](func.params[0]);\n                }\n                params.push(result);\n            }\n        }\n\n        return TransformationMatrix.compose(params);\n    };\n\n    //根据 css transform 属性获取 transformation-matrix 对应的函数名称以及参数\n    SimpleCrop.prototype.getTransformFunctionName = function (transform) {\n        var start = transform.indexOf('(');\n        var end = transform.indexOf(')');\n        var func = {};\n\n        //参数\n        var params = transform.substring(start + 1, end).split(',');\n        var arr = [];\n        for (var i = 0; i < params.length; i++) {\n            arr.push(parseFloat(params[i]));\n        }\n        func.params = arr;\n\n        //名称\n        var name = transform.substring(0, start).toLowerCase();\n        var defParams = 0; //默认参数\n        if (name.indexOf('scale') != -1) {\n            func.name = 'scale';\n            defParams = 1;\n        } else if (name.indexOf('translate') != -1) {\n            func.name = 'translate';\n        } else if (name.indexOf('skew') != -1) {\n            func.name = 'skewDEG';\n        } else if (name.indexOf('rotate') != -1) {\n            func.name = 'rotateDEG'; // 角度\n        }\n\n        //加入默认参数\n        if (name.indexOf('x') != -1) {\n            func.params.push(defParams);\n        } else if (name.indexOf('y') != -1) {\n            func.params.unshift(defParams);\n        } else if (name.indexOf('rotate') == -1 && func.params.length <= 1) { // 除了 rotate 其它函数支持 x、y 两个参数，如果 css transform 属性参数只有一个则另一个参数也是如此。\n            func.params.push(func.params[0]);\n        }\n\n        return func;\n    };\n\n    //计算向量 a 在向量 b 上的投影向量\n    SimpleCrop.prototype.getProjectionVector = function (vecA, vecB) {\n        var bLen = this.vecLen(vecB);\n        var ab = vecA.x * vecB.x + vecA.y * vecB.y;\n\n        var proj = {\n            x: ab / Math.pow(bLen, 2) * vecB.x,\n            y: ab / Math.pow(bLen, 2) * vecB.y,\n        }\n\n        return proj\n    };\n\n    //计算矩形中心到某点的向量在矩形自身坐标系上方向和右方向上的投影向量\n    SimpleCrop.prototype.getPCVectorProjOnUpAndRight = function (point, rectPoints) {\n        //计算矩形自身坐标系的上方向向量和右方向向量\n        var up = {\n            x: rectPoints[1].x - rectPoints[2].x,\n            y: rectPoints[1].y - rectPoints[2].y\n        }\n        var right = {\n            x: rectPoints[1].x - rectPoints[0].x,\n            y: rectPoints[1].y - rectPoints[0].y\n        }\n\n        //计算矩形中心点\n        var center = this.getPointsCenter(rectPoints);\n        var line = {\n            x: point.x - center.x,\n            y: point.y - center.y\n        }\n\n        var uproj = this.getProjectionVector(line, up);\n        var rproj = this.getProjectionVector(line, right);\n\n        return {\n            up: up,\n            uproj: uproj,\n            right: right,\n            rproj: rproj\n        };\n    };\n\n    //根据矩形中心到某一点向量在矩形边框向量的投影长度判断该点是否在矩形内\n    SimpleCrop.prototype.isPointInRectCheckByLen = function (point, rectPoints) {\n        var pcv = this.getPCVectorProjOnUpAndRight(point, rectPoints);\n\n        var precision = 100; //保留两位小数\n\n        var uLen = Math.round(this.vecLen(pcv.uproj) * precision);\n        var height = Math.round(this.vecLen(pcv.up) / 2 * precision);\n        var rLen = Math.round(this.vecLen(pcv.rproj) * precision);\n        var width = Math.round(this.vecLen(pcv.right) / 2 * precision);\n\n        if (uLen <= height && rLen <= width) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    //根据角度和判断点是否在矩形内\n    SimpleCrop.prototype.isPointInRectCheckByAngle = function (point, rectPoints) {\n        //先计算四个向量\n        var vecs = [];\n        for (var i = 0; i < rectPoints.length; i++) {\n            var p = rectPoints[i];\n            vecs.push({\n                x: (p.x - point.x),\n                y: (p.y - point.y)\n            });\n        }\n\n        //计算模最小向量\n        var sIndex = 0;\n        var sLen = 0;\n        for (i = 0; i < vecs.length; i++) {\n            var len = this.vecLen(vecs[i]);\n            if (len == 0 || len < sLen) {\n                sIndex = i;\n                sLen = len;\n            }\n        }\n        len = vecs.length;\n        var sVec = vecs.splice(sIndex, 1)[0];\n        var tVec = sVec;\n        var eVec;\n\n        //依次计算四个向量的夹角\n        var angles = [];\n        for (i = 1; i < len; i++) {\n            var data = this.getMinAngle(tVec, vecs);\n            tVec = data.vec;\n            vecs.splice(data.index, 1);\n            angles.push(data.angle);\n\n            if (vecs.length == 1) {\n                eVec = vecs[0];\n            }\n        }\n        angles.push(this.getMinAngle(eVec, [sVec]).angle);\n\n        var sum = 0;\n        for (i = 0; i < angles.length; i++) {\n            sum += angles[i];\n        }\n\n        //向量之间的夹角等于360度则表示点在矩形内\n        sum = sum.toPrecision(12); //取12位精度能在大部分情况下解决浮点数误差导致的精度问题\n        if (sum < 360) {\n            return false;\n        } else {\n            return true;\n        }\n    };\n\n    //计算向量数组的中向量和目标向量的最小夹角\n    SimpleCrop.prototype.getMinAngle = function (tVec, aVec) {\n        var minAngle = this.vecAngle(tVec, aVec[0]);\n        var minIndex = 0;\n        for (var i = 1; i < aVec.length; i++) {\n            var angle = this.vecAngle(tVec, aVec[i]);\n            if (angle < minAngle) {\n                minAngle = angle;\n                minIndex = i;\n            }\n        }\n        return {\n            angle: minAngle,\n            vec: aVec[minIndex],\n            index: minIndex\n        };\n    };\n\n    //计算向量夹角\n    SimpleCrop.prototype.vecAngle = function (vec1, vec2) {\n        var acos = (vec1.x * vec2.x + vec1.y * vec2.y) / (this.vecLen(vec1) * this.vecLen(vec2));\n        if (Math.abs(acos) > 1) { //因为浮点数精度结果有可能超过1，Math.acos(1.0000001) = NaN\n            acos = acos > 0 ? 1 : -1;\n        }\n        var rad = Math.acos(acos);\n        var angle = rad * 180 / Math.PI;\n        return angle;\n    };\n\n    //计算向量的模\n    SimpleCrop.prototype.vecLen = function (vec) {\n        return Math.sqrt(vec.x * vec.x + vec.y * vec.y);\n    };\n\n    //file转image\n    SimpleCrop.prototype.fileToSrc = function (file, callback) {\n        var reader = new FileReader();\n        reader.onload = function (e) {\n            callback(e.target.result);\n        }\n        reader.readAsDataURL(file)\n    };\n\n    return SimpleCrop;\n}));","(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = factory(require());\n    } else {\n        // Browser globals\n        window.Prefix = factory();\n    }\n}(function () {\n\n    var style = typeof document != 'undefined'\n        ? document.createElement('p').style\n        : {}\n\n    var prefixes = ['O', 'ms', 'Moz', 'Webkit']\n    var upper = /([A-Z])/g\n    var memo = {}\n\n    /**\n     * prefix `key`\n     * prefix('transform') // => WebkitTransform\n     *\n     * @param {String} key\n     * @return {String}\n     * @api public\n     */\n    function prefix(key){\n        // Camel case\n        key = key.replace(/-([a-z])/g, function(_, char){\n            return char.toUpperCase()\n        })\n\n        // Without prefix\n        if (style[key] !== undefined) return key\n\n        // With prefix\n        var Key = key.charAt(0).toUpperCase() + key.slice(1)\n        var i = prefixes.length\n        while (i--) {\n            var name = prefixes[i] + Key\n            if (style[name] !== undefined) return name\n        }\n\n        return key\n    }\n\n    /**\n     * Memoized version of `prefix`\n     *\n     * @param {String} key\n     * @return {String}\n     * @api public\n     */\n    function prefixMemozied(key){\n        return key in memo\n            ? memo[key]\n            : memo[key] = prefix(key)\n    }\n\n    /**\n     * Create a dashed prefix\n     *\n     * @param {String} key\n     * @return {String}\n     * @api public\n     */\n    function prefixDashed(key){\n        key = prefix(key)\n        if (upper.test(key)) {\n            key = key.replace(upper, '-$1')\n            upper.lastIndex = 0\n        }\n        return key.toLowerCase()\n    }\n\n    return {\n        prefix : prefixMemozied,\n        dash : prefixDashed\n    }\n}));","(function() {\n\n    var debug = false;\n\n    var root = this;\n\n    var EXIF = function(obj) {\n        if (obj instanceof EXIF) return obj;\n        if (!(this instanceof EXIF)) return new EXIF(obj);\n        this.EXIFwrapped = obj;\n    };\n\n    if (typeof exports !== 'undefined') {\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = EXIF;\n        }\n        exports.EXIF = EXIF;\n    } else {\n        root.EXIF = EXIF;\n    }\n\n    var ExifTags = EXIF.Tags = {\n\n        // version tags\n        0x9000 : \"ExifVersion\",             // EXIF version\n        0xA000 : \"FlashpixVersion\",         // Flashpix format version\n\n        // colorspace tags\n        0xA001 : \"ColorSpace\",              // Color space information tag\n\n        // image configuration\n        0xA002 : \"PixelXDimension\",         // Valid width of meaningful image\n        0xA003 : \"PixelYDimension\",         // Valid height of meaningful image\n        0x9101 : \"ComponentsConfiguration\", // Information about channels\n        0x9102 : \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\n        // user information\n        0x927C : \"MakerNote\",               // Any desired information written by the manufacturer\n        0x9286 : \"UserComment\",             // Comments by user\n\n        // related file\n        0xA004 : \"RelatedSoundFile\",        // Name of related sound file\n\n        // date and time\n        0x9003 : \"DateTimeOriginal\",        // Date and time when the original image was generated\n        0x9004 : \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n        0x9290 : \"SubsecTime\",              // Fractions of seconds for DateTime\n        0x9291 : \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n        0x9292 : \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\n        // picture-taking conditions\n        0x829A : \"ExposureTime\",            // Exposure time (in seconds)\n        0x829D : \"FNumber\",                 // F number\n        0x8822 : \"ExposureProgram\",         // Exposure program\n        0x8824 : \"SpectralSensitivity\",     // Spectral sensitivity\n        0x8827 : \"ISOSpeedRatings\",         // ISO speed rating\n        0x8828 : \"OECF\",                    // Optoelectric conversion factor\n        0x9201 : \"ShutterSpeedValue\",       // Shutter speed\n        0x9202 : \"ApertureValue\",           // Lens aperture\n        0x9203 : \"BrightnessValue\",         // Value of brightness\n        0x9204 : \"ExposureBias\",            // Exposure bias\n        0x9205 : \"MaxApertureValue\",        // Smallest F number of lens\n        0x9206 : \"SubjectDistance\",         // Distance to subject in meters\n        0x9207 : \"MeteringMode\",            // Metering mode\n        0x9208 : \"LightSource\",             // Kind of light source\n        0x9209 : \"Flash\",                   // Flash status\n        0x9214 : \"SubjectArea\",             // Location and area of main subject\n        0x920A : \"FocalLength\",             // Focal length of the lens in mm\n        0xA20B : \"FlashEnergy\",             // Strobe energy in BCPS\n        0xA20C : \"SpatialFrequencyResponse\",    //\n        0xA20E : \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n        0xA20F : \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n        0xA210 : \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n        0xA214 : \"SubjectLocation\",         // Location of subject in image\n        0xA215 : \"ExposureIndex\",           // Exposure index selected on camera\n        0xA217 : \"SensingMethod\",           // Image sensor type\n        0xA300 : \"FileSource\",              // Image source (3 == DSC)\n        0xA301 : \"SceneType\",               // Scene type (1 == directly photographed)\n        0xA302 : \"CFAPattern\",              // Color filter array geometric pattern\n        0xA401 : \"CustomRendered\",          // Special processing\n        0xA402 : \"ExposureMode\",            // Exposure mode\n        0xA403 : \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n        0xA404 : \"DigitalZoomRation\",       // Digital zoom ratio\n        0xA405 : \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n        0xA406 : \"SceneCaptureType\",        // Type of scene\n        0xA407 : \"GainControl\",             // Degree of overall image gain adjustment\n        0xA408 : \"Contrast\",                // Direction of contrast processing applied by camera\n        0xA409 : \"Saturation\",              // Direction of saturation processing applied by camera\n        0xA40A : \"Sharpness\",               // Direction of sharpness processing applied by camera\n        0xA40B : \"DeviceSettingDescription\",    //\n        0xA40C : \"SubjectDistanceRange\",    // Distance to subject\n\n        // other tags\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0xA420 : \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n    };\n\n    var TiffTags = EXIF.TiffTags = {\n        0x0100 : \"ImageWidth\",\n        0x0101 : \"ImageHeight\",\n        0x8769 : \"ExifIFDPointer\",\n        0x8825 : \"GPSInfoIFDPointer\",\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0x0102 : \"BitsPerSample\",\n        0x0103 : \"Compression\",\n        0x0106 : \"PhotometricInterpretation\",\n        0x0112 : \"Orientation\",\n        0x0115 : \"SamplesPerPixel\",\n        0x011C : \"PlanarConfiguration\",\n        0x0212 : \"YCbCrSubSampling\",\n        0x0213 : \"YCbCrPositioning\",\n        0x011A : \"XResolution\",\n        0x011B : \"YResolution\",\n        0x0128 : \"ResolutionUnit\",\n        0x0111 : \"StripOffsets\",\n        0x0116 : \"RowsPerStrip\",\n        0x0117 : \"StripByteCounts\",\n        0x0201 : \"JPEGInterchangeFormat\",\n        0x0202 : \"JPEGInterchangeFormatLength\",\n        0x012D : \"TransferFunction\",\n        0x013E : \"WhitePoint\",\n        0x013F : \"PrimaryChromaticities\",\n        0x0211 : \"YCbCrCoefficients\",\n        0x0214 : \"ReferenceBlackWhite\",\n        0x0132 : \"DateTime\",\n        0x010E : \"ImageDescription\",\n        0x010F : \"Make\",\n        0x0110 : \"Model\",\n        0x0131 : \"Software\",\n        0x013B : \"Artist\",\n        0x8298 : \"Copyright\"\n    };\n\n    var GPSTags = EXIF.GPSTags = {\n        0x0000 : \"GPSVersionID\",\n        0x0001 : \"GPSLatitudeRef\",\n        0x0002 : \"GPSLatitude\",\n        0x0003 : \"GPSLongitudeRef\",\n        0x0004 : \"GPSLongitude\",\n        0x0005 : \"GPSAltitudeRef\",\n        0x0006 : \"GPSAltitude\",\n        0x0007 : \"GPSTimeStamp\",\n        0x0008 : \"GPSSatellites\",\n        0x0009 : \"GPSStatus\",\n        0x000A : \"GPSMeasureMode\",\n        0x000B : \"GPSDOP\",\n        0x000C : \"GPSSpeedRef\",\n        0x000D : \"GPSSpeed\",\n        0x000E : \"GPSTrackRef\",\n        0x000F : \"GPSTrack\",\n        0x0010 : \"GPSImgDirectionRef\",\n        0x0011 : \"GPSImgDirection\",\n        0x0012 : \"GPSMapDatum\",\n        0x0013 : \"GPSDestLatitudeRef\",\n        0x0014 : \"GPSDestLatitude\",\n        0x0015 : \"GPSDestLongitudeRef\",\n        0x0016 : \"GPSDestLongitude\",\n        0x0017 : \"GPSDestBearingRef\",\n        0x0018 : \"GPSDestBearing\",\n        0x0019 : \"GPSDestDistanceRef\",\n        0x001A : \"GPSDestDistance\",\n        0x001B : \"GPSProcessingMethod\",\n        0x001C : \"GPSAreaInformation\",\n        0x001D : \"GPSDateStamp\",\n        0x001E : \"GPSDifferential\"\n    };\n\n     // EXIF 2.3 Spec\n    var IFD1Tags = EXIF.IFD1Tags = {\n        0x0100: \"ImageWidth\",\n        0x0101: \"ImageHeight\",\n        0x0102: \"BitsPerSample\",\n        0x0103: \"Compression\",\n        0x0106: \"PhotometricInterpretation\",\n        0x0111: \"StripOffsets\",\n        0x0112: \"Orientation\",\n        0x0115: \"SamplesPerPixel\",\n        0x0116: \"RowsPerStrip\",\n        0x0117: \"StripByteCounts\",\n        0x011A: \"XResolution\",\n        0x011B: \"YResolution\",\n        0x011C: \"PlanarConfiguration\",\n        0x0128: \"ResolutionUnit\",\n        0x0201: \"JpegIFOffset\",    // When image format is JPEG, this value show offset to JPEG data stored.(aka \"ThumbnailOffset\" or \"JPEGInterchangeFormat\")\n        0x0202: \"JpegIFByteCount\", // When image format is JPEG, this value shows data size of JPEG image (aka \"ThumbnailLength\" or \"JPEGInterchangeFormatLength\")\n        0x0211: \"YCbCrCoefficients\",\n        0x0212: \"YCbCrSubSampling\",\n        0x0213: \"YCbCrPositioning\",\n        0x0214: \"ReferenceBlackWhite\"\n    };\n\n    var StringValues = EXIF.StringValues = {\n        ExposureProgram : {\n            0 : \"Not defined\",\n            1 : \"Manual\",\n            2 : \"Normal program\",\n            3 : \"Aperture priority\",\n            4 : \"Shutter priority\",\n            5 : \"Creative program\",\n            6 : \"Action program\",\n            7 : \"Portrait mode\",\n            8 : \"Landscape mode\"\n        },\n        MeteringMode : {\n            0 : \"Unknown\",\n            1 : \"Average\",\n            2 : \"CenterWeightedAverage\",\n            3 : \"Spot\",\n            4 : \"MultiSpot\",\n            5 : \"Pattern\",\n            6 : \"Partial\",\n            255 : \"Other\"\n        },\n        LightSource : {\n            0 : \"Unknown\",\n            1 : \"Daylight\",\n            2 : \"Fluorescent\",\n            3 : \"Tungsten (incandescent light)\",\n            4 : \"Flash\",\n            9 : \"Fine weather\",\n            10 : \"Cloudy weather\",\n            11 : \"Shade\",\n            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\n            13 : \"Day white fluorescent (N 4600 - 5400K)\",\n            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\n            15 : \"White fluorescent (WW 3200 - 3700K)\",\n            17 : \"Standard light A\",\n            18 : \"Standard light B\",\n            19 : \"Standard light C\",\n            20 : \"D55\",\n            21 : \"D65\",\n            22 : \"D75\",\n            23 : \"D50\",\n            24 : \"ISO studio tungsten\",\n            255 : \"Other\"\n        },\n        Flash : {\n            0x0000 : \"Flash did not fire\",\n            0x0001 : \"Flash fired\",\n            0x0005 : \"Strobe return light not detected\",\n            0x0007 : \"Strobe return light detected\",\n            0x0009 : \"Flash fired, compulsory flash mode\",\n            0x000D : \"Flash fired, compulsory flash mode, return light not detected\",\n            0x000F : \"Flash fired, compulsory flash mode, return light detected\",\n            0x0010 : \"Flash did not fire, compulsory flash mode\",\n            0x0018 : \"Flash did not fire, auto mode\",\n            0x0019 : \"Flash fired, auto mode\",\n            0x001D : \"Flash fired, auto mode, return light not detected\",\n            0x001F : \"Flash fired, auto mode, return light detected\",\n            0x0020 : \"No flash function\",\n            0x0041 : \"Flash fired, red-eye reduction mode\",\n            0x0045 : \"Flash fired, red-eye reduction mode, return light not detected\",\n            0x0047 : \"Flash fired, red-eye reduction mode, return light detected\",\n            0x0049 : \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n            0x004D : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n            0x004F : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n            0x0059 : \"Flash fired, auto mode, red-eye reduction mode\",\n            0x005D : \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n            0x005F : \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n        },\n        SensingMethod : {\n            1 : \"Not defined\",\n            2 : \"One-chip color area sensor\",\n            3 : \"Two-chip color area sensor\",\n            4 : \"Three-chip color area sensor\",\n            5 : \"Color sequential area sensor\",\n            7 : \"Trilinear sensor\",\n            8 : \"Color sequential linear sensor\"\n        },\n        SceneCaptureType : {\n            0 : \"Standard\",\n            1 : \"Landscape\",\n            2 : \"Portrait\",\n            3 : \"Night scene\"\n        },\n        SceneType : {\n            1 : \"Directly photographed\"\n        },\n        CustomRendered : {\n            0 : \"Normal process\",\n            1 : \"Custom process\"\n        },\n        WhiteBalance : {\n            0 : \"Auto white balance\",\n            1 : \"Manual white balance\"\n        },\n        GainControl : {\n            0 : \"None\",\n            1 : \"Low gain up\",\n            2 : \"High gain up\",\n            3 : \"Low gain down\",\n            4 : \"High gain down\"\n        },\n        Contrast : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        Saturation : {\n            0 : \"Normal\",\n            1 : \"Low saturation\",\n            2 : \"High saturation\"\n        },\n        Sharpness : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        SubjectDistanceRange : {\n            0 : \"Unknown\",\n            1 : \"Macro\",\n            2 : \"Close view\",\n            3 : \"Distant view\"\n        },\n        FileSource : {\n            3 : \"DSC\"\n        },\n\n        Components : {\n            0 : \"\",\n            1 : \"Y\",\n            2 : \"Cb\",\n            3 : \"Cr\",\n            4 : \"R\",\n            5 : \"G\",\n            6 : \"B\"\n        }\n    };\n\n    function addEvent(element, event, handler) {\n        if (element.addEventListener) {\n            element.addEventListener(event, handler, false);\n        } else if (element.attachEvent) {\n            element.attachEvent(\"on\" + event, handler);\n        }\n    }\n\n    function imageHasData(img) {\n        return !!(img.exifdata);\n    }\n\n\n    function base64ToArrayBuffer(base64, contentType) {\n        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n        base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        var binary = atob(base64);\n        var len = binary.length;\n        var buffer = new ArrayBuffer(len);\n        var view = new Uint8Array(buffer);\n        for (var i = 0; i < len; i++) {\n            view[i] = binary.charCodeAt(i);\n        }\n        return buffer;\n    }\n\n    function objectURLToBlob(url, callback) {\n        var http = new XMLHttpRequest();\n        http.open(\"GET\", url, true);\n        http.responseType = \"blob\";\n        http.onload = function(e) {\n            if (this.status == 200 || this.status === 0) {\n                callback(this.response);\n            }\n        };\n        http.send();\n    }\n\n    function getImageData(img, callback) {\n        function handleBinaryFile(binFile) {\n            var data = findEXIFinJPEG(binFile);\n            img.exifdata = data || {};\n            var iptcdata = findIPTCinJPEG(binFile);\n            img.iptcdata = iptcdata || {};\n            if (EXIF.isXmpEnabled) {\n               var xmpdata= findXMPinJPEG(binFile);\n               img.xmpdata = xmpdata || {};               \n            }\n            if (callback) {\n                callback.call(img);\n            }\n        }\n\n        if (img.src) {\n            if (/^data\\:/i.test(img.src)) { // Data URI\n                var arrayBuffer = base64ToArrayBuffer(img.src);\n                handleBinaryFile(arrayBuffer);\n\n            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n                var fileReader = new FileReader();\n                fileReader.onload = function(e) {\n                    handleBinaryFile(e.target.result);\n                };\n                objectURLToBlob(img.src, function (blob) {\n                    fileReader.readAsArrayBuffer(blob);\n                });\n            } else {\n                var http = new XMLHttpRequest();\n                http.onload = function() {\n                    if (this.status == 200 || this.status === 0) {\n                        handleBinaryFile(http.response);\n                    } else {\n                        throw \"Could not load image\";\n                    }\n                    http = null;\n                };\n                http.open(\"GET\", img.src, true);\n                http.responseType = \"arraybuffer\";\n                http.send(null);\n            }\n        } else if (self.FileReader && (img instanceof self.Blob || img instanceof self.File)) {\n            var fileReader = new FileReader();\n            fileReader.onload = function(e) {\n                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n                handleBinaryFile(e.target.result);\n            };\n\n            fileReader.readAsArrayBuffer(img);\n        }\n    }\n\n    function findEXIFinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            marker;\n\n        while (offset < length) {\n            if (dataView.getUint8(offset) != 0xFF) {\n                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n                return false; // not a valid marker, something is wrong\n            }\n\n            marker = dataView.getUint8(offset + 1);\n            if (debug) console.log(marker);\n\n            // we could implement handling for other markers here,\n            // but we're only looking for 0xFFE1 for EXIF data\n\n            if (marker == 225) {\n                if (debug) console.log(\"Found 0xFFE1 marker\");\n\n                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\n                // offset += 2 + file.getShortAt(offset+2, true);\n\n            } else {\n                offset += 2 + dataView.getUint16(offset+2);\n            }\n\n        }\n\n    }\n\n    function findIPTCinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength;\n\n\n        var isFieldSegmentStart = function(dataView, offset){\n            return (\n                dataView.getUint8(offset) === 0x38 &&\n                dataView.getUint8(offset+1) === 0x42 &&\n                dataView.getUint8(offset+2) === 0x49 &&\n                dataView.getUint8(offset+3) === 0x4D &&\n                dataView.getUint8(offset+4) === 0x04 &&\n                dataView.getUint8(offset+5) === 0x04\n            );\n        };\n\n        while (offset < length) {\n\n            if ( isFieldSegmentStart(dataView, offset )){\n\n                // Get the length of the name header (which is padded to an even number of bytes)\n                var nameHeaderLength = dataView.getUint8(offset+7);\n                if(nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n                // Check for pre photoshop 6 format\n                if(nameHeaderLength === 0) {\n                    // Always 4\n                    nameHeaderLength = 4;\n                }\n\n                var startOffset = offset + 8 + nameHeaderLength;\n                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\n                return readIPTCData(file, startOffset, sectionLength);\n\n                break;\n\n            }\n\n\n            // Not the marker, continue searching\n            offset++;\n\n        }\n\n    }\n    var IptcFieldMap = {\n        0x78 : 'caption',\n        0x6E : 'credit',\n        0x19 : 'keywords',\n        0x37 : 'dateCreated',\n        0x50 : 'byline',\n        0x55 : 'bylineTitle',\n        0x7A : 'captionWriter',\n        0x69 : 'headline',\n        0x74 : 'copyright',\n        0x0F : 'category'\n    };\n    function readIPTCData(file, startOffset, sectionLength){\n        var dataView = new DataView(file);\n        var data = {};\n        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n        var segmentStartPos = startOffset;\n        while(segmentStartPos < startOffset+sectionLength) {\n            if(dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos+1) === 0x02){\n                segmentType = dataView.getUint8(segmentStartPos+2);\n                if(segmentType in IptcFieldMap) {\n                    dataSize = dataView.getInt16(segmentStartPos+3);\n                    segmentSize = dataSize + 5;\n                    fieldName = IptcFieldMap[segmentType];\n                    fieldValue = getStringFromDB(dataView, segmentStartPos+5, dataSize);\n                    // Check if we already stored a value with this name\n                    if(data.hasOwnProperty(fieldName)) {\n                        // Value already stored with this name, create multivalue field\n                        if(data[fieldName] instanceof Array) {\n                            data[fieldName].push(fieldValue);\n                        }\n                        else {\n                            data[fieldName] = [data[fieldName], fieldValue];\n                        }\n                    }\n                    else {\n                        data[fieldName] = fieldValue;\n                    }\n                }\n\n            }\n            segmentStartPos++;\n        }\n        return data;\n    }\n\n\n\n    function readTags(file, tiffStart, dirStart, strings, bigEnd) {\n        var entries = file.getUint16(dirStart, !bigEnd),\n            tags = {},\n            entryOffset, tag,\n            i;\n\n        for (i=0;i<entries;i++) {\n            entryOffset = dirStart + i*12 + 2;\n            tag = strings[file.getUint16(entryOffset, !bigEnd)];\n            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n        }\n        return tags;\n    }\n\n\n    function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n        var type = file.getUint16(entryOffset+2, !bigEnd),\n            numValues = file.getUint32(entryOffset+4, !bigEnd),\n            valueOffset = file.getUint32(entryOffset+8, !bigEnd) + tiffStart,\n            offset,\n            vals, val, n,\n            numerator, denominator;\n\n        switch (type) {\n            case 1: // byte, 8-bit unsigned int\n            case 7: // undefined, 8-bit byte, value depending on field\n                if (numValues == 1) {\n                    return file.getUint8(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint8(offset + n);\n                    }\n                    return vals;\n                }\n\n            case 2: // ascii, 8-bit byte\n                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                return getStringFromDB(file, offset, numValues-1);\n\n            case 3: // short, 16 bit int\n                if (numValues == 1) {\n                    return file.getUint16(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint16(offset + 2*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 4: // long, 32 bit int\n                if (numValues == 1) {\n                    return file.getUint32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 5:    // rational = two long values, first is numerator, second is denominator\n                if (numValues == 1) {\n                    numerator = file.getUint32(valueOffset, !bigEnd);\n                    denominator = file.getUint32(valueOffset+4, !bigEnd);\n                    val = new Number(numerator / denominator);\n                    val.numerator = numerator;\n                    val.denominator = denominator;\n                    return val;\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        numerator = file.getUint32(valueOffset + 8*n, !bigEnd);\n                        denominator = file.getUint32(valueOffset+4 + 8*n, !bigEnd);\n                        vals[n] = new Number(numerator / denominator);\n                        vals[n].numerator = numerator;\n                        vals[n].denominator = denominator;\n                    }\n                    return vals;\n                }\n\n            case 9: // slong, 32 bit signed int\n                if (numValues == 1) {\n                    return file.getInt32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 10: // signed rational, two slongs, first is numerator, second is denominator\n                if (numValues == 1) {\n                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset+4, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 8*n, !bigEnd) / file.getInt32(valueOffset+4 + 8*n, !bigEnd);\n                    }\n                    return vals;\n                }\n        }\n    }\n\n    /**\n    * Given an IFD (Image File Directory) start offset\n    * returns an offset to next IFD or 0 if it's the last IFD.\n    */\n    function getNextIFDOffset(dataView, dirStart, bigEnd){\n        //the first 2bytes means the number of directory entries contains in this IFD\n        var entries = dataView.getUint16(dirStart, !bigEnd);\n\n        // After last directory entry, there is a 4bytes of data,\n        // it means an offset to next IFD.\n        // If its value is '0x00000000', it means this is the last IFD and there is no linked IFD.\n\n        return dataView.getUint32(dirStart + 2 + entries * 12, !bigEnd); // each entry is 12 bytes long\n    }\n\n    function readThumbnailImage(dataView, tiffStart, firstIFDOffset, bigEnd){\n        // get the IFD1 offset\n        var IFD1OffsetPointer = getNextIFDOffset(dataView, tiffStart+firstIFDOffset, bigEnd);\n\n        if (!IFD1OffsetPointer) {\n            // console.log('******** IFD1Offset is empty, image thumb not found ********');\n            return {};\n        }\n        else if (IFD1OffsetPointer > dataView.byteLength) { // this should not happen\n            // console.log('******** IFD1Offset is outside the bounds of the DataView ********');\n            return {};\n        }\n        // console.log('*******  thumbnail IFD offset (IFD1) is: %s', IFD1OffsetPointer);\n\n        var thumbTags = readTags(dataView, tiffStart, tiffStart + IFD1OffsetPointer, IFD1Tags, bigEnd)\n\n        // EXIF 2.3 specification for JPEG format thumbnail\n\n        // If the value of Compression(0x0103) Tag in IFD1 is '6', thumbnail image format is JPEG.\n        // Most of Exif image uses JPEG format for thumbnail. In that case, you can get offset of thumbnail\n        // by JpegIFOffset(0x0201) Tag in IFD1, size of thumbnail by JpegIFByteCount(0x0202) Tag.\n        // Data format is ordinary JPEG format, starts from 0xFFD8 and ends by 0xFFD9. It seems that\n        // JPEG format and 160x120pixels of size are recommended thumbnail format for Exif2.1 or later.\n\n        if (thumbTags['Compression']) {\n            // console.log('Thumbnail image found!');\n\n            switch (thumbTags['Compression']) {\n                case 6:\n                    // console.log('Thumbnail image format is JPEG');\n                    if (thumbTags.JpegIFOffset && thumbTags.JpegIFByteCount) {\n                    // extract the thumbnail\n                        var tOffset = tiffStart + thumbTags.JpegIFOffset;\n                        var tLength = thumbTags.JpegIFByteCount;\n                        thumbTags['blob'] = new Blob([new Uint8Array(dataView.buffer, tOffset, tLength)], {\n                            type: 'image/jpeg'\n                        });\n                    }\n                break;\n\n            case 1:\n                console.log(\"Thumbnail image format is TIFF, which is not implemented.\");\n                break;\n            default:\n                console.log(\"Unknown thumbnail image format '%s'\", thumbTags['Compression']);\n            }\n        }\n        else if (thumbTags['PhotometricInterpretation'] == 2) {\n            console.log(\"Thumbnail image format is RGB, which is not implemented.\");\n        }\n        return thumbTags;\n    }\n\n    function getStringFromDB(buffer, start, length) {\n        var outstr = \"\";\n        for (n = start; n < start+length; n++) {\n            outstr += String.fromCharCode(buffer.getUint8(n));\n        }\n        return outstr;\n    }\n\n    function readEXIFData(file, start) {\n        if (getStringFromDB(file, start, 4) != \"Exif\") {\n            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n            return false;\n        }\n\n        var bigEnd,\n            tags, tag,\n            exifData, gpsData,\n            tiffOffset = start + 6;\n\n        // test for TIFF validity and endianness\n        if (file.getUint16(tiffOffset) == 0x4949) {\n            bigEnd = false;\n        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n            bigEnd = true;\n        } else {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return false;\n        }\n\n        if (file.getUint16(tiffOffset+2, !bigEnd) != 0x002A) {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n            return false;\n        }\n\n        var firstIFDOffset = file.getUint32(tiffOffset+4, !bigEnd);\n\n        if (firstIFDOffset < 0x00000008) {\n            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset+4, !bigEnd));\n            return false;\n        }\n\n        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n\n        if (tags.ExifIFDPointer) {\n            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n            for (tag in exifData) {\n                switch (tag) {\n                    case \"LightSource\" :\n                    case \"Flash\" :\n                    case \"MeteringMode\" :\n                    case \"ExposureProgram\" :\n                    case \"SensingMethod\" :\n                    case \"SceneCaptureType\" :\n                    case \"SceneType\" :\n                    case \"CustomRendered\" :\n                    case \"WhiteBalance\" :\n                    case \"GainControl\" :\n                    case \"Contrast\" :\n                    case \"Saturation\" :\n                    case \"Sharpness\" :\n                    case \"SubjectDistanceRange\" :\n                    case \"FileSource\" :\n                        exifData[tag] = StringValues[tag][exifData[tag]];\n                        break;\n\n                    case \"ExifVersion\" :\n                    case \"FlashpixVersion\" :\n                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n                        break;\n\n                    case \"ComponentsConfiguration\" :\n                        exifData[tag] =\n                            StringValues.Components[exifData[tag][0]] +\n                            StringValues.Components[exifData[tag][1]] +\n                            StringValues.Components[exifData[tag][2]] +\n                            StringValues.Components[exifData[tag][3]];\n                        break;\n                }\n                tags[tag] = exifData[tag];\n            }\n        }\n\n        if (tags.GPSInfoIFDPointer) {\n            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n            for (tag in gpsData) {\n                switch (tag) {\n                    case \"GPSVersionID\" :\n                        gpsData[tag] = gpsData[tag][0] +\n                            \".\" + gpsData[tag][1] +\n                            \".\" + gpsData[tag][2] +\n                            \".\" + gpsData[tag][3];\n                        break;\n                }\n                tags[tag] = gpsData[tag];\n            }\n        }\n\n        // extract thumbnail\n        tags['thumbnail'] = readThumbnailImage(file, tiffOffset, firstIFDOffset, bigEnd);\n\n        return tags;\n    }\n\n   function findXMPinJPEG(file) {\n\n        if (!('DOMParser' in self)) {\n            // console.warn('XML parsing not supported without DOMParser');\n            return;\n        }\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n           if (debug) console.log(\"Not a valid JPEG\");\n           return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            dom = new DOMParser();\n\n        while (offset < (length-4)) {\n            if (getStringFromDB(dataView, offset, 4) == \"http\") {\n                var startOffset = offset - 1;\n                var sectionLength = dataView.getUint16(offset - 2) - 1;\n                var xmpString = getStringFromDB(dataView, startOffset, sectionLength)\n                var xmpEndIndex = xmpString.indexOf('xmpmeta>') + 8;\n                xmpString = xmpString.substring( xmpString.indexOf( '<x:xmpmeta' ), xmpEndIndex );\n\n                var indexOfXmp = xmpString.indexOf('x:xmpmeta') + 10\n                //Many custom written programs embed xmp/xml without any namespace. Following are some of them.\n                //Without these namespaces, XML is thought to be invalid by parsers\n                xmpString = xmpString.slice(0, indexOfXmp)\n                            + 'xmlns:Iptc4xmpCore=\"http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/\" '\n                            + 'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" '\n                            + 'xmlns:tiff=\"http://ns.adobe.com/tiff/1.0/\" '\n                            + 'xmlns:plus=\"http://schemas.android.com/apk/lib/com.google.android.gms.plus\" '\n                            + 'xmlns:ext=\"http://www.gettyimages.com/xsltExtension/1.0\" '\n                            + 'xmlns:exif=\"http://ns.adobe.com/exif/1.0/\" '\n                            + 'xmlns:stEvt=\"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#\" '\n                            + 'xmlns:stRef=\"http://ns.adobe.com/xap/1.0/sType/ResourceRef#\" '\n                            + 'xmlns:crs=\"http://ns.adobe.com/camera-raw-settings/1.0/\" '\n                            + 'xmlns:xapGImg=\"http://ns.adobe.com/xap/1.0/g/img/\" '\n                            + 'xmlns:Iptc4xmpExt=\"http://iptc.org/std/Iptc4xmpExt/2008-02-29/\" '\n                            + xmpString.slice(indexOfXmp)\n\n                var domDocument = dom.parseFromString( xmpString, 'text/xml' );\n                return xml2Object(domDocument);\n            } else{\n             offset++;\n            }\n        }\n    }\n\n    function xml2json(xml) {\n        var json = {};\n      \n        if (xml.nodeType == 1) { // element node\n          if (xml.attributes.length > 0) {\n            json['@attributes'] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n              var attribute = xml.attributes.item(j);\n              json['@attributes'][attribute.nodeName] = attribute.nodeValue;\n            }\n          }\n        } else if (xml.nodeType == 3) { // text node\n          return xml.nodeValue;\n        }\n      \n        // deal with children\n        if (xml.hasChildNodes()) {\n          for(var i = 0; i < xml.childNodes.length; i++) {\n            var child = xml.childNodes.item(i);\n            var nodeName = child.nodeName;\n            if (json[nodeName] == null) {\n              json[nodeName] = xml2json(child);\n            } else {\n              if (json[nodeName].push == null) {\n                var old = json[nodeName];\n                json[nodeName] = [];\n                json[nodeName].push(old);\n              }\n              json[nodeName].push(xml2json(child));\n            }\n          }\n        }\n        \n        return json;\n    }\n\n    function xml2Object(xml) {\n        try {\n            var obj = {};\n            if (xml.children.length > 0) {\n              for (var i = 0; i < xml.children.length; i++) {\n                var item = xml.children.item(i);\n                var attributes = item.attributes;\n                for(var idx in attributes) {\n                    var itemAtt = attributes[idx];\n                    var dataKey = itemAtt.nodeName;\n                    var dataValue = itemAtt.nodeValue;\n\n                    if(dataKey !== undefined) {\n                        obj[dataKey] = dataValue;\n                    }\n                }\n                var nodeName = item.nodeName;\n\n                if (typeof (obj[nodeName]) == \"undefined\") {\n                  obj[nodeName] = xml2json(item);\n                } else {\n                  if (typeof (obj[nodeName].push) == \"undefined\") {\n                    var old = obj[nodeName];\n\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                  }\n                  obj[nodeName].push(xml2json(item));\n                }\n              }\n            } else {\n              obj = xml.textContent;\n            }\n            return obj;\n          } catch (e) {\n              console.log(e.message);\n          }\n    }\n\n    EXIF.enableXmp = function() {\n        EXIF.isXmpEnabled = true;\n    }\n\n    EXIF.disableXmp = function() {\n        EXIF.isXmpEnabled = false;\n    }\n\n    EXIF.getData = function(img, callback) {\n        if (((self.Image && img instanceof self.Image)\n            || (self.HTMLImageElement && img instanceof self.HTMLImageElement))\n            && !img.complete)\n            return false;\n\n        if (!imageHasData(img)) {\n            getImageData(img, callback);\n        } else {\n            if (callback) {\n                callback.call(img);\n            }\n        }\n        return true;\n    }\n\n    EXIF.getTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.exifdata[tag];\n    }\n    \n    EXIF.getIptcTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.iptcdata[tag];\n    }\n\n    EXIF.getAllTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.exifdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n    \n    EXIF.getAllIptcTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.iptcdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n\n    EXIF.pretty = function(img) {\n        if (!imageHasData(img)) return \"\";\n        var a,\n            data = img.exifdata,\n            strPretty = \"\";\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                if (typeof data[a] == \"object\") {\n                    if (data[a] instanceof Number) {\n                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n                    } else {\n                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n                    }\n                } else {\n                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n                }\n            }\n        }\n        return strPretty;\n    }\n\n    EXIF.readFromBinaryFile = function(file) {\n        return findEXIFinJPEG(file);\n    }\n\n    if (typeof define === 'function' && define.amd) {\n        define('exif-js', [], function() {\n            return EXIF;\n        });\n    }\n}.call(this));\n\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nexport function fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n","/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nexport function fromString (string) {\n  const parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n","/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  const { a, b, c, d, e, f } = matrix\n\n  const denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","import { isNumeric, isObject } from './utils'\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nexport function isAffineMatrix (object) {\n  return isObject(object) &&\n    'a' in object &&\n    isNumeric(object.a) &&\n    'b' in object &&\n    isNumeric(object.b) &&\n    'c' in object &&\n    isNumeric(object.c) &&\n    'd' in object &&\n    isNumeric(object.d) &&\n    'e' in object &&\n    isNumeric(object.e) &&\n    'f' in object &&\n    isNumeric(object.f)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default: {\n      const [m1, m2, ...rest] = matrices\n      const m = multiply(m1, m2)\n      return transform(m, ...rest)\n    }\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  const cosAngle = cos(angle)\n  const sinAngle = sin(angle)\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","import { isUndefined } from './utils'\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @returns {Matrix} Affine Matrix\n */\nexport function scale (sx, sy = undefined) {\n  if (isUndefined(sy)) sy = sx\n  return {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n}\n","/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n","/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n","/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nexport function smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n","import { inverse } from './inverse'\nimport { transform } from './transform'\nimport { smoothMatrix } from './smoothMatrix'\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nexport function fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  const px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  const py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  const px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  const py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  const qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  const qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  const qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  const qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  const rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  const ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  const rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  const ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  const r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  const r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  const inverseR1 = inverse(r1)\n  const affineMatrix = transform([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return smoothMatrix(affineMatrix)\n}\n","import { fromObject } from './fromObject'\nimport { translate } from './translate'\nimport { scale } from './scale'\nimport { rotateDEG } from './rotate'\nimport { skewDEG } from './skew'\nimport { shear } from './shear'\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, cx: 50, cy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nexport function fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return fromObject(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return translate(descriptor.tx, descriptor.ty)\n\n        return translate(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return scale(descriptor.sx, descriptor.sy)\n\n        return scale(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return rotateDEG(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return rotateDEG(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return shear(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n","// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { parse } from './fromTransformAttribute.autogenerated'\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {MatrixDescriptor[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nexport function fromTransformAttribute (transformString) {\n  return parse(transformString)\n}\n","export * from './applyToPoint'\nexport * from './fromObject'\nexport * from './fromString'\nexport * from './identity'\nexport * from './inverse'\nexport * from './isAffineMatrix'\nexport * from './rotate'\nexport * from './scale'\nexport * from './shear'\nexport * from './skew'\nexport * from './toString'\nexport * from './transform'\nexport * from './translate'\nexport * from './fromTriangles'\nexport * from './smoothMatrix'\nexport * from './fromDefinition'\nexport * from './fromTransformAttribute'\n"],"sourceRoot":""}