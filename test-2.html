<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>测试二</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover ">
    <link rel="stylesheet" href="./dist/template-2.css">
    <script src="./lib/vconsole.js"></script>
    <script>
        var vConsole = new VConsole(); // 初始化
    </script>
</head>

<body>
    <input id="upload" type="file" accept="image/png,image/jpeg">

    <script src="./lib/prefix-umd.js"></script>
    <script src="./lib/alloy_finger.js"></script>
    <script src="./lib/exif.js"></script>
    <script src="./index.js"></script>
    <script>
        var offsetTop = document.documentElement.clientHeight * 0.04;
        var offsetLeft = document.documentElement.clientWidth * 0.02;

        var simpleCrop = new SimpleCrop({
            src: './img/test3.jpg',
            size: {
                width: 1000,
                height: 600
            },
            borderWidth: 1,
            cropSizePercent: 0.9,
            controller: ['touch'],
            positionOffset: {
                left: offsetLeft,
                top: offsetTop
            },
            coverColor: 'rgba(0,0,0,.3)',
            funcBtns: ['close', 'crop', 'around', 'reset'],
            scaleSlider: false,
            rotateSlider: true,
            cropCallback: function () {
                this.$resultCanvas.style.marginRight = '10px';
                this.$resultCanvas.style.width = '50%';
                document.body.appendChild(this.$resultCanvas);
            }
        });

        //上传图片
        var $upload = document.querySelector('#upload');
        $upload.addEventListener('change', function (evt) {
            var files = evt.target.files;
            if (files.length > 0) {
                simpleCrop.show(files[0]);
            }
            $upload.value = ''; //清空value属性，从而保证用户修改文件内容但是没有修改文件名时依然能上传成功
        });
    </script>
</body>

</html>